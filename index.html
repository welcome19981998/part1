<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>aaa</title>
        <style>
          body {
            margin: 0;
          }
          .classa {
            font-size: 129px;
            background-color: aqua;
          }
          .classnone {
            display: none;
          }
          .menu {
            background-color: black;
            color: white;
            height: 16vh;
            width: 50vw;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            border-radius: 10px;
            border: 5px solid rgb(134, 132, 129);
          }
          .z{
            z-index: 21;
            position:absolute;
            width: 100%;
            height: 100%;
            background-color:red;
            opacity: 0;
            top: 0;
            left: 0;
            cursor: pointer;
          }
          .text{
            z-index: 10;
            width: 60vw;
            height: 20vh;
            background-color: black;
            border-radius: 10px;
            border: 5px solid rgb(134, 132, 129);
            margin: 0 0 0 20vw;
          }
          .Textarea{
            position:absolute;
            top: 5vh;
            margin: 0 auto;
            display: flex;
            color: white;
            font-size: 2.5vh;
          }
          .Maincommand{
            background-color: black;
            color: white;
            height: 16vh;
            width: 11vw;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            /*文字の空白で改行する*/
            white-space: pre-wrap;
            word-wrap: break-word;
            border-radius: 10px;
            border: 5px solid rgb(134, 132, 129);
          }
          .Unusable{
            color: rgb(134, 132, 129);
            cursor: not-allowed;
          }
          .Unusable:active{
            color: rgb(134, 132, 129);
            cursor: not-allowed;
            pointer-events: none;/*クリックできないようにする*/
          }
          .command {
            border-radius: 10px;
            height: 4vh;
            color: white;
            cursor: pointer;
            pointer-events: auto;/*クリックできるようにする*/
          }
          .command:hover{
            background-color: rgb(44, 44, 44);
            border-color: green;
            cursor: pointer;
          }
          .center{
            text-align: center;
          }
          .ml-3vw{
            margin-left: 3vw;
          }
          .w-19vw{
            width: 19vw;
          }
          .stage1{
            background-image:url("stage1.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage2{
            background-image:url("stage21.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage3{
            background-image:url("stage3.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage4{
            background-image:url("stage4.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage5{
            background-image:url("stage5.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage53{
            background-image:url("stage53.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage61{
            background-image:url("stage61.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage62{
            background-image:url("stage62.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage71{
            background-image:url("stage71.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage73{
            background-image:url("stage73.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage93{
            background-image:url("stage93.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage92{
            background-image:url("stage92.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .final4{
            background-image:url("final4.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .ending{
            background-image:url("ending.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .stage0{
            background-image:url("stage0.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .opening{
            background-image:url("opening.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .syuraku{
            background-image:url("村2.jpeg");
            background-repeat: no-repeat;
            background-size:cover;
          }
          .content {
            width: 100vw;
            height: 100vh;
          }
          .z31 {
            z-index: 31;
          }
          .tytlemanu {
            position: absolute;
            z-index: 31;
            /* top:50%;
            left:50%; */
            top: 60vh;
            left: 42vw;
            /* width: 10vw; */
            /* height: 20vh; */
            background-color: black;
            color: white;
            /* display: flex; */
            /* flex-direction: column;
            flex-wrap: wrap; */
            /* font-size: 10vh; */
            border-radius: 10px;
            border: 5px solid rgb(134, 132, 129);
             margin: 0 auto;
            /* padding: 50vh 40vw 0 40vw; */
            /* position: absolute;
            top: 50vh;
            left: 40vw; */
            /* width: 20vw;
            height: 20vh;  */
            /* width: 30vw;
            height: 30vw; */
          }
          .tytlecommand {
            font-size: 2vw;
            cursor: pointer;
            width: 16vw;
          }
          .tytlecommand:hover{
            background-color: rgb(44, 44, 44);
            /* border-color: green; */
            cursor: pointer;
          }
          .text2{
            /* font-size: 2vw;
            width: 16vw; */
            cursor:text !important;
          }
          .gameover{
            font-size: 2.5vh;
          }
          .Imagearea{
            position: absolute;
            top: 30vh;
            width: 100vw;
            height: 60vh;
          }
          .Image {
            position: absolute;
            top: 5vh;
            left: 35vw;
            width: 30vw;
            height: 30vw;
          }
          .Imageimage {
            width: 100%;
            height: 100%;
          }
          .Image2{
            position: absolute;
            top: 5vh;
            left: 35vw;
            width: 30vw;
            height: 30vw;
            z-index: 11;
            opacity: 0;
          }
          .tennmetu1 {
            animation: tennmetu 0.25s;
          }
          .tennmetu2 {
            animation: tennmetu2 0.25s;
          }
          @keyframes tennmetu {
            30% {
              opacity: 0;
            }
            60% {
              opacity: 1;
            }
            80% {
              opacity: 0;
            }
            100% {
              opacity: 1;
            }
          }
          @keyframes tennmetu2 {
            30% {
              opacity: 0;
            }
            60% {
              opacity: 1;
            }
            80% {
              opacity: 0;
            }
            100% {
              opacity: 1;
            }
          }
          .scale1 {
            animation: scale1 0.5s;
          }
          .scale2 {
            animation: scale2 0.5s;
          }
          @keyframes scale1 {
            10% {
              transform: scale(0.1,0.1);
              opacity: 0.1;
            }
            90% {
              opacity: 1;
              transform: scale(1,1);
            }
          }
          @keyframes scale2 {
            10% {
              transform: scale(0.1,0.1);
              opacity: 0.1;
            }
            90% {
              opacity: 1;
              transform: scale(1,1);
            }
          }
          .hurueru1 {
            animation: hurueru1 0.25s;
          }
          .hurueru2 {
            animation: hurueru2 0.25s;
          }
          @keyframes hurueru1 {
            25% {
              transform: translateX(4px);
            }
            50% {
              transform: translateX(-4px);
            }
            75% {
              transform: translateX(2px);
            }
            100% {
              transform: translateX(-2px);
            }
          }
          @keyframes hurueru2 {
            25% {
              transform: translateX(4px);
            }
            50% {
              transform: translateX(-4px);
            }
            75% {
              transform: translateX(2px);
            }
            100% {
              transform: translateX(-2px);
            }
          }
        </style>
    </head>
    <body>
      <div id="app">
        <div class = "content z31 opening" v-show="Newgame === 0 && Gameover === 0">
          <div class = "tytlemanu ">
            <div class = "tytlecommand gameover" @click="Newgame = 1; Opening();">ゲームを始める</div>
            <div class = "tytlecommand gameover" @click="setumei();">説明を読む</div>
          </div>
        </div>
        <div class = "z31" v-show="Gameover === 1">
          <div class = "tytlemanu gameover">
            <div class = "text2"  >実績</div>
            <div class = "text2"  >{{stagename}}（{{Gopoint}}/{{stagelength}}）</div>
            <div class = "text2"  >敵：{{EName}}</div>
            <div class = "text2"  >敵のHP：{{EHp}}/{{EMaxHp}}</div>
            <div class = "tytlecommand  gameover"  @click="reset();">タイトルに戻る</div>
          </div>
        </div>
        <div class = "content" v-show="Newgame === 1 " v-bind:class="{'syuraku': this.BackImage==='syuraku','stage1': this.BackImage==='stage1','stage2': this.BackImage==='stage2','stage3': this.BackImage==='stage3','stage4': this.BackImage==='stage4','stage61': this.BackImage==='stage61','stage62': this.BackImage==='stage62','stage71': this.BackImage==='stage71','stage73': this.BackImage==='stage73','stage93': this.BackImage==='stage93','stage92': this.BackImage==='stage92','final4': this.BackImage==='final4','ending': this.BackImage==='ending','stage0': this.BackImage==='stage0',}">
          <!-- <div>{{"msg2"}}</div> -->
          <button name="myBtn" v-show="SwitchOn === false && Gameover === 0 " class="z" v-on:click="Action" ></button>

          <div class="Textarea">
              <div class="Maincommand center ml-3vw" v-show="SwitchOn && BClist !== 'confirm'">
                <div class="center" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''">{{Name}}Lv.{{Level}}</div>
                <div  v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''"> HP：{{Hp}}/{{MaxHp}}</div>
                <div  v-on:mouseover="msg1 = ''" v-on:mouseleave="msg1 = ''"> MP：{{Mp}}/{{MaxMp}}</div>
                <div  v-on:mouseover="msg1 = ''" v-on:mouseleave="msg1 = ''"> 状態変化：{{Joutaihennka}}</div>
              </div>
              <div class="Maincommand" v-show="SwitchOn && BClist !== 'confirm'">
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Pattack; Pattack();"  v-on:mouseover="msg1 = '通常攻撃　稀に会心の一撃を繰り出す' " v-on:mouseleave="msg1 = ''">・攻撃</div>
                <div class="command" @click="BClist = 'Skill'" v-on:mouseover="msg1 = 'MPを使って攻撃する' " v-on:mouseleave="msg1 = ''">・特技</div>
                <div class="command" @click="BClist = 'Magic'" v-on:mouseover="msg1 = 'MPを使って呪文を唱える' " v-on:mouseleave="msg1 = ''">・呪文</div>
                <div class="command" @click="BClist = 'Item'" v-on:mouseover="msg1 = '道具を使って回復する' " v-on:mouseleave="msg1 = ''">・道具</div>
              </div>
              <div class ="text" style="white-space:pre-wrap; word-wrap:break-word;" v-show="SwitchOn === false" v-bind:class="{hurueru1: huruerufun===1, hurueru2: huruerufun===2,}">{{text}}</div>
              <div class="menu Unusable" v-show="BClist === 'Skill'">
                <!-- <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= aaa1; aaa1();" v-show="a() <= 1" v-on:mouseover="msg1 = '凄まじく攻撃する' " v-on:mouseleave="msg1 = ''">・クリック！</div> -->
                <div v-bind:class="{command: Mp >=3}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Kabutowari; Skill_Kabutowari();Mp -= 3;" v-show="Useskill.includes('かぶと割り')" v-on:mouseover="msg1 =Tx_Kabutowari" v-on:mouseleave="msg1 = ''">・かぶと割り</div>
                <div v-bind:class="{command: Mp >=3}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Yaibakudaki; Skill_Yaibakudaki();Mp -= 3;" v-show="Useskill.includes('刃砕き')" v-on:mouseover="msg1 =Tx_Yaibakudaki" v-on:mouseleave="msg1 = ''">・刃砕き</div>
                <div v-bind:class="{command: Mp >=3}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Kaihukugiri; Skill_Kaihukugiri();Mp -= 3;" v-show="Useskill.includes('回復斬り')" v-on:mouseover="msg1 =Tx_Kaihukugiri" v-on:mouseleave="msg1 = ''">・回復斬り</div>
                <div v-bind:class="{command: Hp <=MaxHp/4}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Kisikaisei; Skill_Kisikaisei();" v-show="Useskill.includes('起死回生')" v-on:mouseover="msg1 =Tx_Kisikaisei" v-on:mouseleave="msg1 = ''">・起死回生</div>
                <div v-bind:class="{command: Mp >=5}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Nidangiri; Skill_Nidangiri();Mp -= 5;" v-show="Useskill.includes('二段斬り')" v-on:mouseover="msg1 =Tx_Nidangiri" v-on:mouseleave="msg1 = ''">・二段斬り</div>
                <div v-bind:class="{command: Mp >=5}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Midareduki; Skill_Midareduki();" v-show="Useskill.includes('乱れ突き')" v-on:mouseover="msg1 = Tx_Midareduki " v-on:mouseleave="msg1 = ''">・乱れ突き</div>
                <div v-bind:class="{command: Mp >=4}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Huiuti; Skill_Huiuti();Mp -= 4;" v-show="Useskill.includes('不意打ち')" v-on:mouseover="msg1 =Tx_Huiuti" v-on:mouseleave="msg1 = ''">・不意打ち</div>
                <div v-bind:class="{command: Mp >=40}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Skill_Kaisinhittyu; Skill_Kaisinhittyu();Mp -= 40;" v-show="Useskill.includes('会心必中')" v-on:mouseover="msg1 =Tx_Kaisinhittyu" v-on:mouseleave="msg1 = ''">・会心必中</div>
              </div>
              <div class="menu" v-show="BClist === 'Item'">
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_yakusou; Item_yakusou();" v-show="Yakusou_stock >= 1" v-on:mouseover="msg1 = Tx_Yakusou + Yakusou_stock +uri+''" v-on:mouseleave="msg1 = ''">・薬草</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Dokukesi; Item_Dokukesi();" v-show="Dokukesi_stock >= 1" v-on:mouseover="msg1 = Tx_Dokukesi + Dokukesi_stock +uri+''" v-on:mouseleave="msg1 = ''">・毒消し</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Seisui; Item_Seisui();" v-show="Seisui_stock >= 1" v-on:mouseover="msg1 = Tx_Seisui + Seisui_stock +uri+''" v-on:mouseleave="msg1 = ''">・聖水</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Bannouyaku; Item_Bannouyaku();" v-show="Bannouyaku_stock >= 1" v-on:mouseover="msg1 = Tx_Bannouyaku + Bannouyaku_stock +uri+''" v-on:mouseleave="msg1 = ''">・万能薬</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Coffee; Item_Coffee();" v-show="Coffee_stock >= 1" v-on:mouseover="msg1 = Tx_Coffee + Coffee_stock +uri+''" v-on:mouseleave="msg1 = ''">・コーヒー</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Kisekinomizu; Item_Kisekinomizu();" v-show="Kisekinomizu_stock >= 1" v-on:mouseover="msg1 = Tx_Kisekinomizu + Kisekinomizu_stock +uri+''" v-on:mouseleave="msg1 = ''">・奇跡の水</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Seireinosakazuki; Item_Seireinosakazuki();" v-show="Seireinosakazuki_stock >= 1" v-on:mouseover="msg1 = Tx_Seireinosakazuki + Seireinosakazuki_stock +uri+''" v-on:mouseleave="msg1 = ''">・精霊の杯</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Tikaranokajitu; Item_Tikaranokajitu();" v-show="Tikaranokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Tikaranokajitu + Tikaranokajitu_stock +uri+''"v-on:mouseleave="msg1 = ''">・力の果実</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Mamorinokajitu; Item_Mamorinokajitu();" v-show="Mamorinokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Mamorinokajitu + Mamorinokajitu_stock +uri+''" v-on:mouseleave="msg1 = ''">・守りの果実</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Inotinokajitu; Item_Inotinokajitu();" v-show="Inotinokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Inotinokajitu + Inotinokajitu_stock +uri+''" v-on:mouseleave="msg1 = ''">・命の果実</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Maryokunokajitu; Item_Maryokunokajitu();" v-show="Maryokunokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Maryokunokajitu + Maryokunokajitu_stock +uri+''" v-on:mouseleave="msg1 = ''">・魔力の果実</div>
              </div>
              <div class="menu Unusable" v-show="BClist === 'Magic'">
                <!-- <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= aaa2; aaa2();" v-show="a() <= 1" v-on:mouseover="msg1 = '念入りに攻撃する' " v-on:mouseleave="msg1 = ''">・クリック！</div> -->
                <div v-bind:class="{command: Mp >=2}" v-show="Usemagic.includes('ファイア')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_fire; Magic_fire(); Mp -= 2;" v-on:mouseover="msg1 = Tx_Fire " v-on:mouseleave="msg1 = ''">・ファイア</div>
                <div v-bind:class="{command: Mp >=4}" v-show="Usemagic.includes('アイス')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_ice; Magic_ice(); Mp -= 4;" v-on:mouseover="msg1 = Tx_Ice " v-on:mouseleave="msg1 = ''">・アイス</div>
                <div v-bind:class="{command: Mp >=3}" v-show="Usemagic.includes('スパーク')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_spark; Magic_spark(); Mp -= 3;" v-on:mouseover="msg1 = Tx_Spark " v-on:mouseleave="msg1 = ''">・スパーク</div>
                <div v-bind:class="{command: Mp >=2}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_mirror; Magic_mirror(); Mp -= 2;" v-show="Usemagic.includes('ミラー')" v-on:mouseover="msg1 = Tx_Mirror " v-on:mouseleave="msg1 = ''">・ミラー</div>
                <div v-bind:class="{command: Mp >=16}" v-show="Usemagic.includes('バーニング')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_burning; Magic_burning(); Mp -= 16;" v-on:mouseover="msg1 = Tx_Burning " v-on:mouseleave="msg1 = ''">・バーニング</div>
                <div v-bind:class="{command: Mp >=12}" v-show="Usemagic.includes('ブリザード')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_blizzard; Magic_blizzard(); Mp -= 12;" v-on:mouseover="msg1 = Tx_Blizzard " v-on:mouseleave="msg1 = ''">・ブリザード</div>
                <div v-bind:class="{command: Mp >=14}" v-show="Usemagic.includes('テンペスト')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_tempest; Magic_tempest(); Mp -= 14;" v-on:mouseover="msg1 = Tx_Tempest " v-on:mouseleave="msg1 = ''">・テンペスト</div>
                <div v-bind:class="{command: Mp >=1}" v-show="Usemagic.includes('ファイナル')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_final; Magic_final();" v-on:mouseover="msg1 = Tx_Final " v-on:mouseleave="msg1 = ''">・ファイナル</div>
                <div v-bind:class="{command: Mp >=2}" v-show="Usemagic.includes('フレッシュ')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_fresh; Magic_fresh(); Mp -= 2;" v-on:mouseover="msg1 = Tx_Fresh" v-on:mouseleave="msg1 = ''">・フレッシュ</div>
                <div v-bind:class="{command: Mp >=10}" v-show="Usemagic.includes('サブヒール')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_subheal; Magic_subheal(); Mp -= 10;" v-on:mouseover="msg1 = Tx_Subheal " v-on:mouseleave="msg1 = ''">・サブヒール</div>
                <div v-bind:class="{command: Mp >=20}" v-show="Usemagic.includes('フルヒール')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_fullheal; Magic_fullheal(); Mp -= 20;" v-on:mouseover="msg1 = Tx_Fullheal " v-on:mouseleave="msg1 = ''">・フルヒール</div>
                <div v-bind:class="{command: Mp >=4}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_charge; Magic_charge(); Mp -= 4;" v-show="Usemagic.includes('チャージ')" v-on:mouseover="msg1 = Tx_Charge " v-on:mouseleave="msg1 = ''">・チャージ</div>
                <div v-bind:class="{command: Mp >=4}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_build; Magic_build(); Mp -= 4;" v-show="Usemagic.includes('ビルド')" v-on:mouseover="msg1 = Tx_Build " v-on:mouseleave="msg1 = ''">・ビルド</div>
                <div v-bind:class="{command: Mp >=2}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_spoil; Magic_spoil(); Mp -= 2;" v-show="Usemagic.includes('スポイル')" v-on:mouseover="msg1 = Tx_Spoil " v-on:mouseleave="msg1 = ''">・スポイル</div>
                <div v-bind:class="{command: Mp >=2}" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_melt; Magic_melt(); Mp -= 2;" v-show="Usemagic.includes('メルト')" v-on:mouseover="msg1 = Tx_Melt " v-on:mouseleave="msg1 = ''">・メルト</div>
              </div>
              <div class="menu text" v-show="BClist === 'confirm' && NonBCommand === 'main' && SwitchOn === true ">
                <div>{{confirmmsg}}</div>
                <div class="command" v-show=" Confirmtype === '次の行動'" @click="Goahead();" v-on:mouseover="msg1 = '前にすすむ' " v-on:mouseleave="msg1 = ''">前に進む</div>
                <div class="command" v-show=" Confirmtype === '次の行動'" @click="Lookaround();" v-on:mouseover="msg1 = '周囲を調べる' " v-on:mouseleave="msg1 = ''">周囲を調べる</div>
                <div class="command" v-show=" Confirmtype === '次の行動'" @click="NonBCommand = 'item_nonbattle' " v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">持ち物</div>
                <div class="command" v-show=" Confirmtype === '次の行動'" @click="NonBCommand = 'magic_nonbattle' " v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">呪文</div>
                <!--<div class="command" v-show=" Confirmtype === '次の行動'" @click="Takarabakohakken('ミミック',100,100,100,[{action: EPoisonattack, per: 10},{action: ESleep, per: 80}],'','ミミック.png',1200,12);" v-on:mouseover="msg1 = '雑攻撃する' " v-on:mouseleave="msg1 = ''">街に戻る</div> -->
                <div class="command" v-show=" Confirmtype === 'はいいいえ'" @click="YesAction" v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">はい</div>
                <div class="command" v-show=" Confirmtype === 'はいいいえ'" @click="NoAction" v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">いいえ</div>
                <div class="command" v-show=" Confirmtype === '買い物'" @click="NonBCommand = 'Buy'" v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">物を買う</div>
                <div class="command" v-show=" Confirmtype === '買い物'" @click="NonBCommand = 'Sell'" v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">物を売る</div>
                <div class="command" v-show=" Confirmtype === '買い物'" @click="NonBCommand = 'item_nonbattle' " v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">持ち物を確認する</div>
                <div class="command" v-show=" Confirmtype === '買い物'" @click="Nextstage()" v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">{{Tx_saki}}</div>

              </div>
              <div class="Maincommand center ml-3vw" v-show=" SwitchOn && BClist === 'confirm' && NonBCommand === 'item_nonbattle' ||SwitchOn && BClist === 'confirm' && NonBCommand !== 'main'">
                <div class="center"  v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''">{{Name}}Lv.{{Level}}</div>
                <div  v-show=" NonBClist !== 'Wepon' && NonBClist !== 'Shield'" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''"> HP：{{Hp}}/{{MaxHp}}</div>
                <div  v-show=" NonBClist !== 'Wepon' && NonBClist !== 'Shield'" v-on:mouseover="msg1 = ''" v-on:mouseleave="msg1 = ''"> MP：{{Mp}}/{{MaxMp}}</div>
                <div  v-show=" NonBClist !== 'Wepon' && NonBClist !== 'Shield' && Confirmtype !== '買い物'" v-on:mouseover="msg1 = ''" v-on:mouseleave="msg1 = ''"> 状態変化：{{Joutaihennka}}</div>
                <div  v-show=" NonBClist === 'Wepon' || NonBClist === 'Shield'" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''"> AT：{{BaseATk+WeponATk}}</div>
                <div  v-show=" NonBClist === 'Wepon' || NonBClist === 'Shield'" v-on:mouseover="msg1 = ''" v-on:mouseleave="msg1 = ''"> DF：{{BaseDEf+WeponDEf}}</div>
                <div  v-show=" Confirmtype === '買い物'" v-on:mouseover="msg1 = ''" v-on:mouseleave="msg1 = ''"> お金：{{Gold}}G</div>
              </div>
              <!--　ここから持ち物確認リスト-->
              <div class="Maincommand" v-show="SwitchOn && BClist === 'confirm' && NonBCommand === 'item_nonbattle'">
                <div class="command" @click=" NonBCommand = 'main'; NonBClist = '';" v-show="a() <= 1" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''">・戻る</div>
                <div class="command" @click="NonBClist = 'Wepon'" v-show="a() <= 1" v-on:mouseover="msg1 = '武器を確認・装備する' " v-on:mouseleave="msg1 = ''">・武器</div>
                <div class="command" @click="NonBClist = 'Shield'" v-show="a() <= 1" v-on:mouseover="msg1 = '防具を確認・装備する' " v-on:mouseleave="msg1 = ''">・防具</div>
                <div class="command" @click="NonBClist = 'Item'"v-show="a() <= 1" v-on:mouseover="msg1 = '道具を使って回復する' " v-on:mouseleave="msg1 = ''">・道具</div>
              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Wepon'">
                <div class="command" @click=" WeponATk = 10;Wepon = '木刀'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('木刀')" v-on:mouseover="msg1 = Tx_Bokutou " v-on:mouseleave="msg1 = ''">・木刀<span v-show="Wepon==='木刀'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 30;Wepon = '銅の剣'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('銅の剣')" v-on:mouseover="msg1 = Tx_Dounoken " v-on:mouseleave="msg1 = ''">・銅の剣<span v-show="Wepon==='銅の剣'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 50;Wepon = '鋼の剣'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('鋼の剣')" v-on:mouseover="msg1 = Tx_Haganenoken " v-on:mouseleave="msg1 = ''">・鋼の剣<span v-show="Wepon==='鋼の剣'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 70;Wepon = '黄金の剣'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('黄金の剣')" v-on:mouseover="msg1 = Tx_Ougonnoken " v-on:mouseleave="msg1 = ''">・黄金の剣<span v-show="Wepon==='黄金の剣'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 50;Wepon = '会心の剣'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('会心の剣')" v-on:mouseover="msg1 = Tx_Kaisinnoken " v-on:mouseleave="msg1 = ''">・会心の剣<span v-show="Wepon==='会心の剣'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 70;Wepon = '妖刀村正'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('妖刀村正')" v-on:mouseover="msg1 = Tx_Muramasa " v-on:mouseleave="msg1 = ''">・妖刀村正<span v-show="Wepon==='妖刀村正'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 70;Wepon = '力の剣'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('力の剣')" v-on:mouseover="msg1 = Tx_Tikara " v-on:mouseleave="msg1 = ''">・力の剣<span v-show="Wepon==='力の剣'"> 装備中</span></div>
                <div class="command" @click=" WeponATk = 120;Wepon = '伝説の剣'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('伝説の剣')" v-on:mouseover="msg1 = Tx_Densetunoken " v-on:mouseleave="msg1 = ''">・伝説の剣<span v-show="Wepon==='伝説の剣'"> 装備中</span></div>
              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Shield'">
                <div class="command" @click=" WeponDEf = 10;Shield = '鍋ぶた'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('鍋ぶた')" v-on:mouseover="msg1 = Tx_Nabehuta " v-on:mouseleave="msg1 = ''">・鍋ぶた<span v-show="Shield==='鍋ぶた'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 20;Shield = '銅の盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('銅の盾')" v-on:mouseover="msg1 = Tx_Dounotate " v-on:mouseleave="msg1 = ''">・銅の盾<span v-show="Shield==='銅の盾'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 30;Shield = '鋼の盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('鋼の盾')" v-on:mouseover="msg1 = Tx_Haganenotate " v-on:mouseleave="msg1 = ''">・鋼の盾<span v-show="Shield==='鋼の盾'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 40;Shield = '黄金の盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('黄金の盾')" v-on:mouseover="msg1 = Tx_Ougonnotate " v-on:mouseleave="msg1 = ''">・黄金の盾<span v-show="Shield==='黄金の盾'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 20;Shield = '魔力の盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('魔力の盾')" v-on:mouseover="msg1 = Tx_Maryokunotate " v-on:mouseleave="msg1 = ''">・魔力の盾<span v-show="Shield==='魔力の盾'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 50;Shield = '癒しの盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('癒しの盾')" v-on:mouseover="msg1 = Tx_Iyasinotate " v-on:mouseleave="msg1 = ''">・癒しの盾<span v-show="Shield==='癒しの盾'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 40;Shield = '守護の盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('守護の盾')" v-on:mouseover="msg1 = Tx_Syugonotate " v-on:mouseleave="msg1 = ''">・守護の盾<span v-show="Shield==='守護の盾'"> 装備中</span></div>
                <div class="command" @click=" WeponDEf = 70;Shield = '伝説の盾'; Action= Wepon_change; Wepon_change();" v-show="UseWeponShield.includes('伝説の盾')" v-on:mouseover="msg1 = Tx_Densetunotate " v-on:mouseleave="msg1 = ''">・伝説の盾<span v-show="Shield==='伝説の盾'"> 装備中</span></div>
              </div>
              <div class="menu" v-show="SwitchOn && NonBClist === 'Item'">
                <div class="command" @click="SwitchOn= !SwitchOn; Action= Item_yakusou; Item_yakusou();" v-show="Yakusou_stock >= 1" v-on:mouseover="msg1 = Tx_Yakusou + Yakusou_stock +uri+''" v-on:mouseleave="msg1 = ''">・薬草</div>
                <div class="command" @click="SwitchOn= !SwitchOn; Action= Item_Dokukesi; Item_Dokukesi();" v-show="Dokukesi_stock >= 1" v-on:mouseover="msg1 = Tx_Dokukesi + Dokukesi_stock +uri+''" v-on:mouseleave="msg1 = ''">・毒消し</div>
                <div class="command" @click="SwitchOn= !SwitchOn; Action= Item_Seisui; Item_Seisui();" v-show="Seisui_stock >= 1" v-on:mouseover="msg1 = Tx_Seisui + Seisui_stock +uri+''" v-on:mouseleave="msg1 = ''">・聖水</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Bannouyaku; Item_Bannouyaku();" v-show="Bannouyaku_stock >= 1" v-on:mouseover="msg1 = Tx_Bannouyaku + Bannouyaku_stock +uri+''" v-on:mouseleave="msg1 = ''">・万能薬</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Coffee; Item_Coffee();" v-show="Coffee_stock >= 1" v-on:mouseover="msg1 = Tx_Coffee + Coffee_stock +uri+''" v-on:mouseleave="msg1 = ''">・コーヒー</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Kisekinomizu; Item_Kisekinomizu();" v-show="Kisekinomizu_stock >= 1" v-on:mouseover="msg1 = Tx_Kisekinomizu + Kisekinomizu_stock +uri+''" v-on:mouseleave="msg1 = ''">・奇跡の水</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Seireinosakazuki; Item_Seireinosakazuki();" v-show="Seireinosakazuki_stock >= 1" v-on:mouseover="msg1 = Tx_Seireinosakazuki + Seireinosakazuki_stock +uri+''" v-on:mouseleave="msg1 = ''">・精霊の杯</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Tikaranokajitu; Item_Tikaranokajitu();" v-show="Tikaranokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Tikaranokajitu + Tikaranokajitu_stock +uri+''"v-on:mouseleave="msg1 = ''">・力の果実</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Mamorinokajitu; Item_Mamorinokajitu();" v-show="Mamorinokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Mamorinokajitu + Mamorinokajitu_stock +uri+''" v-on:mouseleave="msg1 = ''">・守りの果実</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Inotinokajitu; Item_Inotinokajitu();" v-show="Inotinokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Inotinokajitu + Inotinokajitu_stock +uri+''" v-on:mouseleave="msg1 = ''">・命の果実</div>
                <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Item_Maryokunokajitu; Item_Maryokunokajitu();" v-show="Maryokunokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Maryokunokajitu + Maryokunokajitu_stock +uri+''" v-on:mouseleave="msg1 = ''">・魔力の果実</div>
              </div>
              <!--　ここまで持ち物確認リスト-->
              <!--　ここから非戦闘時呪文リスト-->
              <div class="Maincommand" v-show="SwitchOn && BClist === 'confirm' && NonBCommand === 'magic_nonbattle'">
                <div class="command" @click=" NonBCommand = 'main'; NonBClist = '';" v-show="a() <= 1" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''">・戻る</div>
                <div class="command" @click="NonBClist = 'heal'" v-show="a() <= 1" v-on:mouseover="msg1 = '呪文で回復する' " v-on:mouseleave="msg1 = ''">・回復呪文</div>
              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'heal'">
                <div v-bind:class="{command: Mp >=2}" v-show="Usemagic.includes('フレッシュ')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_fresh; Magic_fresh(); Mp -= 2;" v-on:mouseover="msg1 = Tx_Fresh " v-on:mouseleave="msg1 = ''">・フレッシュ</div>
                <div v-bind:class="{command: Mp >=10}" v-show="Usemagic.includes('サブヒール')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_subheal; Magic_subheal(); Mp -= 10;" v-on:mouseover="msg1 = Tx_Subheal " v-on:mouseleave="msg1 = ''">・サブヒール</div>
                <div v-bind:class="{command: Mp >=20}" v-show="Usemagic.includes('フルヒール')" @click="SwitchOn= !SwitchOn; BClist = ''; Action= Magic_fullheal; Magic_fullheal(); Mp -= 20;" v-on:mouseover="msg1 = Tx_Fullheal " v-on:mouseleave="msg1 = ''">・フルヒール</div>
              </div>
              <!--　ここまで非戦闘時呪文リスト-->
               <!--　ここから売るリスト-->
               <div class="Maincommand" v-show="SwitchOn && BClist === 'confirm' && NonBCommand === 'Sell'">
                <div class="command" @click=" NonBCommand = 'main'; NonBClist = '';" v-show="a() <= 1" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''">・戻る</div>
                <div class="command" @click="NonBClist = 'Sell_Wepon'" v-show="a() <= 1" v-on:mouseover="msg1 = '武器を売る' " v-on:mouseleave="msg1 = ''">・武器</div>
                <div class="command" @click="NonBClist = 'Sell_Shield'" v-show="a() <= 1" v-on:mouseover="msg1 = '防具を売る' " v-on:mouseleave="msg1 = ''">・防具</div>
                <div class="command" @click="NonBClist = 'Sell_Item'"v-show="a() <= 1" v-on:mouseover="msg1 = '道具を売る' " v-on:mouseleave="msg1 = ''">・道具</div>
              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Sell_Wepon'">
                <div v-show="UseWeponShield.includes('木刀')" v-on:mouseover="msg1 = Tx_Bokutou+'売り値：0G（ 売れない）'" v-on:mouseleave="msg1 = ''">・木刀</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('銅の剣',150); " v-show="UseWeponShield.includes('銅の剣')" v-on:mouseover="msg1 = Tx_Dounoken+'売り値：150G' " v-on:mouseleave="msg1 = ''">・銅の剣</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('鋼の剣',250); " v-show="UseWeponShield.includes('鋼の剣')" v-on:mouseover="msg1 = Tx_Haganenoken+'売り値：250G' " v-on:mouseleave="msg1 = ''">・鋼の剣</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('黄金の剣',500); " v-show="UseWeponShield.includes('黄金の剣')" v-on:mouseover="msg1 = Tx_Ougonnoken+'売り値：500G' " v-on:mouseleave="msg1 = ''">・黄金の剣</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('会心の剣',800); " v-show="UseWeponShield.includes('会心の剣')" v-on:mouseover="msg1 = Tx_Kaisinnoken+'売り値：800G' " v-on:mouseleave="msg1 = ''">・会心の剣</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('妖刀村正',800); " v-show="UseWeponShield.includes('妖刀村正')" v-on:mouseover="msg1 = Tx_Muramasa+'売り値：800G' " v-on:mouseleave="msg1 = ''">・妖刀村正</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('力の剣',800); " v-show="UseWeponShield.includes('力の剣')" v-on:mouseover="msg1 = Tx_Tikara+'売り値：800G' " v-on:mouseleave="msg1 = ''">・力の剣</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('伝説の剣',1200); " v-show="UseWeponShield.includes('伝説の剣')" v-on:mouseover="msg1 = Tx_Densetunoken+'売り値：1200G' " v-on:mouseleave="msg1 = ''">・伝説の剣</div>
              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Sell_Shield'">
                <div v-show="UseWeponShield.includes('鍋ぶた')" v-on:mouseover="msg1 = Tx_Nabehuta+'売り値：0G（ 売れない）'" v-on:mouseleave="msg1 = ''">・鍋ぶた</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('銅の盾',150); " v-show="UseWeponShield.includes('銅の盾')" v-on:mouseover="msg1 = Tx_Dounotate+'売り値：150G' " v-on:mouseleave="msg1 = ''">・銅の盾</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('鋼の盾',250); " v-show="UseWeponShield.includes('鋼の盾')" v-on:mouseover="msg1 = Tx_Haganenotate+'売り値：250G' " v-on:mouseleave="msg1 = ''">・鋼の盾</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('黄金の盾',500); " v-show="UseWeponShield.includes('黄金の盾')" v-on:mouseover="msg1 = Tx_Ougonnotate+'売り値：500G' " v-on:mouseleave="msg1 = ''">・黄金の盾</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('魔力の盾',400); " v-show="UseWeponShield.includes('魔力の盾')" v-on:mouseover="msg1 = Tx_Maryokunotate+'売り値：400G' " v-on:mouseleave="msg1 = ''">・魔力の盾</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('癒しの盾',800); " v-show="UseWeponShield.includes('癒しの盾')" v-on:mouseover="msg1 = Tx_Iyasinotate+'売り値：800G' " v-on:mouseleave="msg1 = ''">・癒しの盾</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('守護の盾',800); " v-show="UseWeponShield.includes('守護の盾')" v-on:mouseover="msg1 = Tx_Syugonotate+'売り値：800G' " v-on:mouseleave="msg1 = ''">・守護の盾</div>
                <div class="command" @click="Action= WeponShield_sell; WeponShield_sell('伝説の盾',1200); " v-show="UseWeponShield.includes('伝説の盾')" v-on:mouseover="msg1 = Tx_Densetunotate+'売り値：1200G' " v-on:mouseleave="msg1 = ''">・伝説の盾</div>
              </div>
              <div class="menu" v-show="SwitchOn && NonBClist === 'Sell_Item'">
                <div class="command" @click=" Action= Item_sell; Item_sell('薬草',15);" v-show="Yakusou_stock >= 1" v-on:mouseover="msg1 = Tx_Yakusou + Yakusou_stock +uri+'売り値：15G'" v-on:mouseleave="msg1 = ''">・薬草</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('毒消し',15);" v-show="Dokukesi_stock >= 1" v-on:mouseover="msg1 = Tx_Dokukesi + Dokukesi_stock +uri+'売り値：15G'" v-on:mouseleave="msg1 = ''">・毒消し</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('聖水',50);" v-show="Seisui_stock >= 1" v-on:mouseover="msg1 = Tx_Seisui + Seisui_stock +uri+'売り値：50G'" v-on:mouseleave="msg1 = ''">・聖水</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('万能薬',35);" v-show="Bannouyaku_stock >= 1" v-on:mouseover="msg1 = Tx_Bannouyaku + Bannouyaku_stock +uri+'売り値：35G'" v-on:mouseleave="msg1 = ''">・万能薬</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('コーヒー',35);" v-show="Coffee_stock >= 1" v-on:mouseover="msg1 = Tx_Coffee + Coffee_stock +uri+'売り値：35G'" v-on:mouseleave="msg1 = ''">・コーヒー</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('奇跡の水',150);" v-show="Kisekinomizu_stock >= 1" v-on:mouseover="msg1 = Tx_Kisekinomizu + Kisekinomizu_stock +uri+'売り値：150G'" v-on:mouseleave="msg1 = ''">・奇跡の水</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('精霊の杯',300);" v-show="Seireinosakazuki_stock >= 1" v-show="Seireinosakazuki_stock >= 1" v-on:mouseover="msg1 = Tx_Seireinosakazuki + Seireinosakazuki_stock +uri+'売り値：300G'" v-on:mouseleave="msg1 = ''">・精霊の杯</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('力の果実',200);" v-show="Tikaranokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Tikaranokajitu + Tikaranokajitu_stock +uri+'売り値：200G'"v-on:mouseleave="msg1 = ''">・力の果実</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('守りの果実',200);" v-show="Mamorinokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Mamorinokajitu + Mamorinokajitu_stock +uri+'売り値：200G'" v-on:mouseleave="msg1 = ''">・守りの果実</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('命の果実',200);" v-show="Inotinokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Inotinokajitu + Inotinokajitu_stock +uri+'売り値：200G'" v-on:mouseleave="msg1 = ''">・命の果実</div>
                <div class="command" @click=" Action= Item_sell; Item_sell('魔力の果実',200);" v-show="Maryokunokajitu_stock >= 1" v-on:mouseover="msg1 = Tx_Maryokunokajitu + Maryokunokajitu_stock +uri+'売り値：200G'" v-on:mouseleave="msg1 = ''">・魔力の果実</div>
              </div>
              <!--　ここまで売るリスト-->
              <!--　ここから買うリスト-->
              <div class="Maincommand" v-show="SwitchOn && BClist === 'confirm' && NonBCommand === 'Buy'">
                <div class="command" @click=" NonBCommand = 'main'; NonBClist = '';" v-show="a() <= 1" v-on:mouseover="msg1 = '' " v-on:mouseleave="msg1 = ''">・戻る</div>
                <div class="command" @click="NonBClist = 'Buy_Wepon'" v-show="a() <= 1" v-on:mouseover="msg1 = '武器を買う' " v-on:mouseleave="msg1 = ''">・武器</div>
                <div class="command" @click="NonBClist = 'Buy_Shield'" v-show="a() <= 1" v-on:mouseover="msg1 = '防具を買う' " v-on:mouseleave="msg1 = ''">・防具</div>
                <div class="command" @click="NonBClist = 'Buy_Item'"v-show="a() <= 1" v-on:mouseover="msg1 = '道具を買う' " v-on:mouseleave="msg1 = ''">・道具</div>
              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Buy_Wepon'">
                <div v-bind:class="{command: Gold >=300}" @click="Action= WeponShield_buy; WeponShield_buy('銅の剣',300); " v-show="AllWeponShield.includes('銅の剣')" v-on:mouseover="msg1 = Tx_Dounoken+'値段：300G' " v-on:mouseleave="msg1 = ''">・銅の剣</div>
                <div v-bind:class="{command: Gold >=500}" @click="Action= WeponShield_buy; WeponShield_buy('鋼の剣',500); " v-show="AllWeponShield.includes('鋼の剣')" v-on:mouseover="msg1 = Tx_Haganenoken+'値段：500G' " v-on:mouseleave="msg1 = ''">・鋼の剣</div>
                <div v-bind:class="{command: Gold >=1000}" @click="Action= WeponShield_buy; WeponShield_buy('黄金の剣',1000); " v-show="AllWeponShield.includes('黄金の剣')" v-on:mouseover="msg1 = Tx_Ougonnoken+'値段：1000G' " v-on:mouseleave="msg1 = ''">・黄金の剣</div>

              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Buy_Shield'">
                <div v-bind:class="{command: Gold >=300}" @click="Action= WeponShield_buy; WeponShield_buy('銅の盾',300); " v-show="AllWeponShield.includes('銅の盾')" v-on:mouseover="msg1 = Tx_Dounotate+'値段：300G' " v-on:mouseleave="msg1 = ''">・銅の盾</div>
                <div v-bind:class="{command: Gold >=500}" @click="Action= WeponShield_buy; WeponShield_buy('鋼の盾',500); " v-show="AllWeponShield.includes('鋼の盾')" v-on:mouseover="msg1 = Tx_Haganenotate+'値段：500G' " v-on:mouseleave="msg1 = ''">・鋼の盾</div>
                <div v-bind:class="{command: Gold >=1000}" @click="Action= WeponShield_buy; WeponShield_buy('黄金の盾',1000); " v-show="AllWeponShield.includes('黄金の盾')" v-on:mouseover="msg1 = Tx_Ougonnotate+'値段：1000G' " v-on:mouseleave="msg1 = ''">・黄金の盾</div>
                <div v-bind:class="{command: Gold >=300}" @click="Action= WeponShield_buy; WeponShield_buy('魔力の盾',800); " v-show="AllWeponShield.includes('魔力の盾') && Level >= 20" v-on:mouseover="msg1 = Tx_Maryokunotate+'値段：800G' " v-on:mouseleave="msg1 = ''">・魔力の盾</div>

              </div>
              <div class="menu Unusable" v-show="SwitchOn && NonBClist === 'Buy_Item'">
                <div v-bind:class="{command: Gold >=30}" @click=" Action= Item_buy; Item_buy('薬草',30);" v-on:mouseover="msg1 = Tx_Yakusou + Yakusou_stock +uri+'値段：30G'" v-on:mouseleave="msg1 = ''">・薬草</div>
                <div v-bind:class="{command: Gold >=30}" @click=" Action= Item_buy; Item_buy('毒消し',30);" v-on:mouseover="msg1 = Tx_Dokukesi + Dokukesi_stock +uri+'値段：30G'" v-on:mouseleave="msg1 = ''">・毒消し</div>
                <div v-bind:class="{command: Gold >=100}" @click=" Action= Item_buy; Item_buy('聖水',100);" v-on:mouseover="msg1 = Tx_Seisui + Seisui_stock +uri+'値段：100G'" v-on:mouseleave="msg1 = ''">・聖水</div>
                <div v-bind:class="{command: Gold >=70}" @click=" Action= Item_buy; Item_buy('万能薬',70);" v-on:mouseover="msg1 = Tx_Bannouyaku + Bannouyaku_stock +uri+'値段：70G'" v-on:mouseleave="msg1 = ''">・万能薬</div>
                <div v-bind:class="{command: Gold >=70}" @click=" Action= Item_buy; Item_buy('コーヒー',70);" v-on:mouseover="msg1 = Tx_Coffee + Coffee_stock +uri+'値段：70G'" v-on:mouseleave="msg1 = ''">・コーヒー</div>
              </div>
              <!--　ここまで買うリスト-->
              <div class="menu" v-show="SwitchOn && NonBClist === 'Magic'">
                <!-- <div class="command" @click="SwitchOn= !SwitchOn; BClist = ''; Action= aaa2; aaa2();" v-show="a() <= 1" v-on:mouseover="msg1 = '念入りに攻撃する' " v-on:mouseleave="msg1 = ''">・クリック！</div>
                <div class="command" v-show="a() <= 1" v-on:mouseover="msg1 = 'やさしく攻撃する' " v-on:mouseleave="msg1 = ''">・yasasii</div>
                <div class="command" v-on:mouseover="msg1 = '雑に攻撃' " v-on:mouseleave="msg1 = ''">・かっこいい</div>
                <div class="command" v-on:mouseover="msg1 = '雑攻撃する' " v-on:mouseleave="msg1 = ''">・良い</div> -->
              </div>
              <div class="Maincommand w-19vw" v-show="SwitchOn && BClist !== 'confirm' || SwitchOn && BClist === 'confirm' && NonBCommand === 'item_nonbattle' || SwitchOn && BClist === 'confirm' && NonBCommand !== 'main'">{{msg1}}</div>
          </div>
          <div class="Imagearea">
            <div class="Image" v-show="ImageOn" v-bind:class="{tennmetu1: tennmetufun===1, tennmetu2: tennmetufun===2,}">
              <img
              v-bind:src="Image" class="Imageimage"
              />
            </div>
            <div class="Image2" v-bind:class="{scale1: scalefun===1, scale2: scalefun===2,}">
              <img
              v-bind:src="EfectImage" class="Imageimage"
              />
            </div>
          </div>
        </div>
      </div>
            <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
            <script>
              function wawa(){
                window.alert("qwerttt");
              }

              let a=0;
              let counter =0;
              let command ="";
              let dual =0;
                var app = new Vue({
                  el: '#app',
                  data: {
                    msg1: command[a],
                    msg2:a,
                    num1:0,
                    num2:0,
                    confirmmsg:"行動を選んでください",
                    text: command[a],
                    Github: 'https://github.com/f-scratch/zelda-action4th/pull/4095/files',
                    rufi:'https://1.bp.blogspot.com/-tVeC6En4e_E/X96mhDTzJNI/AAAAAAABdBo/jlD_jvZvMuk3qUcNjA_XORrA4w3lhPkdQCNcBGAsYHQ/s1048/onepiece01_luffy.png',
                    color1: command[a],
                    align:'center',
                    myStyle: {
                     color:'yellow',
                     fontSize: '90px',
                   },
                   Newgame:0,//0ならゲームのタイトル画面
                   Gameover:0,//Gameover時の画面
                   SwitchOn: true,//falseの時には全画面クリックのモードになる
                   Battle: true,
                   BCommand: true,//バトルのコマンドかアクション処理中か
                   BClist: "confirm",//選んだ項目の種類
                   Confirmtype: "次の行動",//確認コマンドで表示する選択肢を決める
                   NonBClist:"",
                   NonBCommand: "main",//バトルのコマンドかアクション処理中か
                   Action:"",//全画面クリックで実行するアクション
                   YesAction:"",//はいを選んだ時のアクション
                   NoAction:"",//いいえを選んだ時のアクション
                   ImageOn: false,//画像を表示するスイッチ
                   pushflag: false,
                   tennmetufun: 0,
                   tennmetufun2: true,//点滅
                   scalefun: 0,
                   scalefun2: true,//スケール
                   huruerufun: 0,
                   Image:'oku.png',//image
                   MimicImage:"",//ミミック登場用
                   EfectImage:"炎.png",//エフェクトのイメージ
                   BackImage:"stage1",//背景画像のクラス
                   //戦闘時に必要な変数------------------------------
                   //自分の変数
                   Name:"あなた",//二人称元々プレイヤー
                   Level:1,
                   MaxHp:160,
                   Hp:160,
                   MaxMp:10,
                   Mp:10,
                   Joutaihennka:"なし",
                   Wepon:"木刀",
                   Shield:"鍋ぶた",//着けている防具
                   BaseATk:50,
                   BaseDEf:20,
                   WeponATk:10,
                   WeponDEf:10,
                   ATk:0,
                   DEf:0,
                   Mirror:false,//プレイヤーが呪文を跳ね返すための変数
                   Sleep:0,//スリープカウント
                   EXp:0,//経験値、今はあえて1000レベル5にしているlevel24,30000:TODO
                   Levelup:100,//this.Level*100,//levelupに必要な経験値
                   Gold:0,
                   ///敵の変数
                   EName:"ゴブリン",
                   EMaxHp :100,
                   EMaxHp :100,
                   EHp:100,
                   EBaseATk:40,
                   EBaseDEf:20,
                   EATk:40,
                   EDEf:20,
                   EEXp:0,
                   EGold:0,
                   EActions:"",//敵の行動選択肢
                   Eunique:"",//敵の特性
                   flag:0,
                   //Eskill
                   texta:'',damage1:40,per1:0,mp1:0,perm:0,Atk1:0,per2:0,Dfe:0,per3:0,State:'',per4:0,
                   hansyadamage:0,//反射ダメージがあった場合に点滅させるため作成
                   EAttack2flag:0,//EAttack2で攻撃があたったか否かを判定
                   turnflug:1,//武具の効果発動が1ターンに一回になるよう制御
                   //
                   Gopoint:0,//進み具合,1から0に変更
                   Noivent:0,//周囲を調べ尽くした際のカウンター
                   Doneivent:0,//行われたイベント
                   Stage:1,//現在のステージ
                   stagename:"STAGE1：草原",
                   stagelength:9,
                   //覚えられる特技、魔法関連
                   Allskill:["二段斬り","乱れ突き","回復斬り","かぶと割り",'刃砕き','起死回生','不意打ち','会心必中'],
                   Useskill:[],//["二段斬り","乱れ突き","回復斬り","かぶと割り",'刃砕き','起死回生','不意打ち','会心必中'],
                   Allmagic:['バーニング','ブリザード','テンペスト','サブヒール','フルヒール','フレッシュ','ファイナル','チャージ','ビルド','スポイル','メルト',],
                   Usemagic:['ファイア','アイス','スパーク','ミラー',],//'バーニング','ブリザード','テンペスト','サブヒール','フルヒール','フレッシュ','ファイナル','チャージ','ビルド','スポイル','メルト',],
                   //持っていない全ての武器、持っている武器
                   AllWeponShield:['銅の剣','鋼の剣','黄金の剣','会心の剣','妖刀村正','力の剣','伝説の剣','銅の盾','鋼の盾','黄金の盾','癒しの盾','守護の盾','魔力の盾','伝説の盾'],
                   UseWeponShield:['木刀','鍋ぶた',],//'黄金の剣','黄金の盾'],
                   //宝箱で入手できる道具の全量
                   AllItem:['薬草','毒消し','聖水','万能薬','コーヒー','奇跡の水','精霊の杯','力の果実','守りの果実','命の果実','魔力の果実'],//',身代わり珠'],
                   //宝箱で入手したもの
                   Getting:"",
                   //入手するアイテムの数
                   Getamount:"",
                   //Itemの数
                   Yakusou_stock:5,
                   Dokukesi_stock:3,
                   Seisui_stock:2,
                   Bannouyaku_stock:2,
                   Coffee_stock:1,
                   Kisekinomizu_stock:0,
                   Seireinosakazuki_stock:0,
                   Migawaridama_stock:0,
                   Tikaranokajitu_stock:0,
                   Mamorinokajitu_stock:0,
                   Inotinokajitu_stock:0,
                   Maryokunokajitu_stock:0,
                   //説明文
Tx_Kaisinnoken:`攻撃力+50
1/2の確率で、　
通常攻撃が会心の一撃になる
` ,
Tx_Bokutou:`攻撃力+10
`,
Tx_Nabehuta:`守備力+10
`,
Tx_Haganenoken:`攻撃力+50
`,
Tx_Dounoken:`攻撃力+30
`,
Tx_Ougonnoken:`攻撃力+70
`,
Tx_Muramasa:`攻撃力+70
毎ターンHPが、
6〜10自動で回復する
`,
Tx_Tikara:`攻撃力+70
毎ターン攻撃力が、
6〜10自動で上昇する
`,
Tx_Densetunoken:`攻撃力+120
`,
Tx_Maryokunotate:`守備力+20
毎ターンMPが、
1〜5自動で回復する
`,
Tx_Iyasinotate:`守備力+50
毎ターンHPが、
6〜10自動で回復する
`,
Tx_Syugonotate:`守備力+40
毎ターン守備力が、
6〜10自動で上昇する
`,
Tx_Dounotate:`守備力+20
`,
Tx_Haganenotate:`守備力+30
`,
Tx_Ougonnotate:`守備力+40
`,
Tx_Densetunotate:`守備力+70
`,
uri:`
`,
Tx_Yakusou:`HPを40回復する
所持数：`,
Tx_Dokukesi:`毒から回復する
所持数：`,
Tx_Seisui:`MPを40回復する
所持数：`,
Tx_Bannouyaku:`HPを半分回復し、
毒からも回復する
所持数：`,
Tx_Coffee:`飲んだ分だけ眠りにくくなる
所持数：`,
Tx_Kisekinomizu:`HPを全回復し、
毒からも回復する
所持数：`,
Tx_Seireinosakazuki:`MPを全回復する
所持数：`,
Tx_Tikaranokajitu:`基礎攻撃力を5上げる
所持数：`,
Tx_Mamorinokajitu:`基礎守備力を5上げる
所持数：`,
Tx_Inotinokajitu:`最大HPを5上げる
所持数：`,
Tx_Maryokunokajitu:`最大MPを5上げる
所持数：`,
Tx_Kabutowari:`1/2の確率で、　
相手の守備力を半分にする
消費MP：3
ダメージ倍率：0.8倍` ,
Tx_Yaibakudaki:`1/2の確率で、　
相手の攻撃力を3/4にする
消費MP：3
ダメージ倍率：0.8倍` ,
Tx_Kaihukugiri:`与えたダメージの1/4分、　
HPを回復する
消費MP：3
ダメージ倍率：0.8倍` ,
Tx_Nidangiri:`2回攻撃する
消費MP：5
ダメージ倍率：0.7倍✖️2` ,
Tx_Kisikaisei:`HPが1/4以下の時のみ、
使用することができる
消費MP：0
ダメージ倍率：2倍`,
Tx_Midareduki:`3〜5回連続攻撃する
消費MP：5
ダメージ倍率：0.4倍✖️3〜5`,
Tx_Huiuti:`相手の守備力を無視して、
ダメージを与える
消費MP：4
ダメージ倍率：0.2倍`,
Tx_Kaisinhittyu:`会心の一撃を、
必ず繰り出す
消費MP：40
ダメージ倍率：1倍`,
Tx_Fire:`炎で攻撃する
消費MP：2
ダメージ：20〜40`,
Tx_Ice:`氷で攻撃する
消費MP：4
ダメージ：40〜60`,
Tx_Spark:`雷で攻撃する
消費MP：3
ダメージ：30〜50`,
Tx_Mirror:`使用したターンのみ、
相手の呪文を全て跳ね返す
消費MP：2
`,
Tx_Burning:`炎で攻撃する
消費MP：16
ダメージ：140〜160`,
Tx_Blizzard:`氷で攻撃する
消費MP：12
ダメージ：120〜140`,
Tx_Tempest:`雷で攻撃する
消費MP：14
ダメージ：140〜160`,
Tx_Final:`全ての魔力を解き放ち、
大ダメージを与える
消費MP：全てのMP
ダメージ：消費MP✖️5`,
Tx_Fresh:`毒から回復する
消費MP：2
`,
Tx_Subheal:`HPを半分回復する
消費MP：10
`,
Tx_Fullheal:`HPを全回復し、
毒からも回復する
消費MP：20
`,
Tx_Charge:`自分の攻撃力を1.5倍にする
消費MP：4
`,
Tx_Build:`自分の守備力を1.5倍にする
消費MP：4
`,
Tx_Spoil:`相手の攻撃力を3/4にする
消費MP：2
`,
Tx_Melt:`相手の守備力を3/4にする
消費MP：2
`,
Tx_saki:'村を出る',

                  },
                  methods: {
                    a:function(){
                      return a;
                    },
                    Hurueru: function(){
                      if(this.huruerufun===2){
                        this.huruerufun-=1;
                      }
                      else if(this.huruerufun===1){
                        this.huruerufun+=1;
                      }
                      else if(this.huruerufun===0){
                        this.huruerufun+=1;
                      }
                    },
                    Tennmetu: function(){
                      if(this.tennmetufun===2){
                        this.tennmetufun-=1;
                      }
                      else if(this.tennmetufun===1){
                        this.tennmetufun+=1;
                      }
                      else if(this.tennmetufun===0){
                        this.tennmetufun+=1;
                      }
                    },
                    Scale: function(){
                      if(this.scalefun===2){
                        this.scalefun-=1;
                      }
                      else if(this.scalefun===1){
                        this.scalefun+=1;
                      }
                      else if(this.scalefun===0){
                        this.scalefun+=1;
                      }
                    },
                    Resetfun: function(){
                      this.tennmetufun=0;
                      this.scalefun=0;
                      this.huruerufun=0;
                    },
                    aaa1: function(){
                      command = ["プレイヤーの攻撃！","敵に100ダメージ！","敵に110ダメージ！","敵に120ダメージ！","プレイヤーの攻撃！","敵に100ダメージ！",];
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        //this.SwitchOn= true;//消す
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a >= 1 && a<=3 || a === 5){
                        this.Tennmetu();
                        this.EHp-=230;
                      }
                      this.text=command[a];
                      this.EfectImage=""
                      this.msg2=a;
                      a+=1;
                    },
                    aaa2: function(){
                      command = ["プレイヤーは炎の魔法を使った！","敵に1010ダメージ！","敵に1011ダメージ！",];
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        //this.SwitchOn= true;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 || a === 2){
                        this.Tennmetu();
                        this.Scale();
                        //this.Hurueru();
                      }
                      this.text=command[a];
                      this.EfectImage="炎.png"
                      this.msg2=a;
                      a+=1;
                    },
                    aaa3: function(){
                      command = ["プレイヤーは魔法を使った！","敵に10120ダメージ！","敵に1011ダメージ！","敵はひるんで動けない！"];
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_mirror: function(){
                      command = ["プレイヤーは呪文「ミラー」を唱えた！","目の前に不思議なバリアが現れた！"];
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      this.Mirror = true;//呪文反射オン
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_charge: function(){
                      if(a === 0){
                       command = ["プレイヤーは呪文「チャージ」を唱えた！",];
                       this.SwitchOn= false;
                      }
                      if(a === 1){
                        console.log(111);
                        let Up = Math.floor(this.ATk/2);//今の攻撃力の1/2
                        if(Up + this.ATk > this.BaseATk*5){//基礎攻撃力の5倍になる場合は、上昇量を減らす
                          const q = Up + this.ATk - this.BaseATk*5;
                          Up -= q;
                        }
                        if(Up > 0){
                          this.ATk += Up;
                          this.num1 = Up;
                          command.push(`${this.Name}の攻撃力が${this.num1}上がった！`);
                          console.log(1161);
                        }
                        else{//これ以上上がらない場合
                          command.push(`${this.Name}の攻撃力はこれ以上上がらないようだ`);
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_build: function(){
                      if(a === 0){
                       command = ["プレイヤーは呪文「ビルド」を唱えた！",];
                       this.SwitchOn= false;
                      }
                      if(a === 1){
                        console.log(111);
                        let Up = Math.floor(this.DEf/2);//今の守備力の1/2
                        if(Up + this.DEf > this.BaseDEf*3){//基礎守備力の3倍になる場合は、上昇量を減らす
                          const q = Up + this.DEf - this.BaseDEf*3;
                          Up -= q;
                        }
                        if(Up > 0){
                          this.DEf += Up;
                          this.num1 = Up;
                          command.push(`${this.Name}の守備力が${this.num1}上がった！`);
                          console.log(1161);
                        }
                        else{//これ以上上がらない場合
                          command.push(`${this.Name}の守備力はこれ以上上がらないようだ`);
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_spoil: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「スポイル」を唱えた！",];
                      }
                        this.SwitchOn= false;
                      if(a === 0 ){
                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command.push(`しかし、${this.EName}は呪文を跳ね返した！`);
                          let Down = Math.floor(this.ATk/4);
                          if(this.ATk - Down < Math.floor(this.BaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.ATk - Math.floor(this.BaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.ATk -= Down;
                            command.push(`${this.Name}の攻撃力が${this.num1}下がってしまった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の攻撃力はこれ以上下がらないようだ`);
                          }

                        }
                        else{//呪文が効く場合
                          let Down = Math.floor(this.EATk/4);
                          if(this.EATk - Down < Math.floor(this.EBaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.EATk - Math.floor(this.EBaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.EATk -= Down;
                            command.push(`${this.EName}の攻撃力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.EName}の攻撃力はこれ以上下がらないようだ`);
                          }
                        }
                      }
                      if(a ===1 && command.includes(`${this.EName}の攻撃力が${this.num1}下がった！`)){//敵が下がる場合、魔法陣のエフェクト
                        this.Scale();
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射") && command.includes(`${this.Name}の攻撃力が${this.num1}下がってしまった！`)){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      this.text=command[a];
                      this.EfectImage="aomahoujin.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_melt: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「メルト」を唱えた！",];
                        console.log('EDEf'+this.EDEf+'EBaseDEF'+this.EBaseDEf);
                      }
                        this.SwitchOn= false;
                      if(a === 0 ){
                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command.push(`しかし、${this.EName}は呪文を跳ね返した！`);
                          let Down = Math.floor(this.DEf/4);
                          if(this.DEf - Down < Math.floor(this.BaseDEf/4)){//基礎守備力の1/4以下になる場合
                            Down = this.DEf - Math.floor(this.BaseDEf/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.DEf -= Down;
                            command.push(`${this.Name}の守備力が${this.num1}下がってしまった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の守備力はこれ以上下がらないようだ`);
                          }

                        }
                        else{//呪文が効く場合
                          let Down = Math.floor(this.EDEf/4);
                          if(this.EDEf - Down < Math.floor(this.EBaseDEf/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.EDEf - Math.floor(this.EBaseDEf/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.EDEf -= Down;
                            command.push(`${this.EName}の守備力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.EName}の守備力はこれ以上下がらないようだ`);
                          }
                        }
                      }
                      if(a ===1 && command.includes(`${this.EName}の守備力が${this.num1}下がった！`)){//敵が下がる場合、魔法陣のエフェクト
                        this.Scale();
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射") && command.includes(`${this.Name}の守備力が${this.num1}下がってしまった！`)){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      this.text=command[a];
                      this.EfectImage="aomahoujin.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_fire: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「ファイア」を唱えた！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        //this.Action= this.Magic_fire;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 30 ;//20-49
                        console.log("damage"+Damage);
                        console.log("EAtk"+this.EATk);
                        console.log("Def"+this.DEf);

                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は呪文「ファイア」を唱えた！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else if(this.Eunique.includes("火弱")){//火が弱点の場合ダメージ2倍
                          this.EHp -= Damage+Damage;
                          this.num1 = Damage+Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+this.num1+"ダメージ！";
                          command.push(`${this.EName}は炎が弱点のようだ！`);
                        }
                        else{//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="炎2.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_burning: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「バーニング」を唱えた！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 160 ;//160-179
                        console.log("damage"+Damage);
                        console.log("EAtk"+this.EATk);
                        console.log("Def"+this.DEf);

                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は呪文「バーニング」を唱えた！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else if(this.Eunique.includes("火弱")){//火が弱点の場合ダメージ2倍
                          this.EHp -= Damage+Damage;
                          this.num1 = Damage+Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+this.num1+"ダメージ！";
                          command.push(`${this.EName}は炎が弱点のようだ！`);
                        }
                        else{//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="炎2.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_ice: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「アイス」を唱えた！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        //this.Action= this.Magic_fire;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 50 ;//50-69

                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は呪文「アイス」を唱えた！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else if(this.Eunique.includes("氷弱")){//氷が弱点の場合ダメージ2倍
                          this.EHp -= Damage+Damage;
                          this.num1 = Damage+Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+this.num1+"ダメージ！";
                          command.push(`${this.EName}は氷が弱点のようだ！`);
                        }
                        else{//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="氷2.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_blizzard: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「ブリザード」を唱えた！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 120 ;//120-139

                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は呪文「ブリザード」を唱えた！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else if(this.Eunique.includes("氷弱")){//氷が弱点の場合ダメージ2倍
                          this.EHp -= Damage+Damage;
                          this.num1 = Damage+Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+this.num1+"ダメージ！";
                          command.push(`${this.EName}は氷が弱点のようだ！`);
                        }
                        else{//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="氷2.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_spark: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「スパーク」を唱えた！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        //this.Action= this.Magic_fire;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 40 ;//40-59

                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は呪文「スパーク」を唱えた！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else if(this.Eunique.includes("雷弱")){//氷が弱点の場合ダメージ2倍
                          this.EHp -= Damage+Damage;
                          this.num1 = Damage+Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+this.num1+"ダメージ！";
                          command.push(`${this.EName}は雷が弱点のようだ！`);
                        }
                        else{//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="電撃.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_tempest: function(){
                      if(a <= 0){
                        command = [this.Name+"は呪文「テンペスト」を唱えた！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        //this.Action= this.Magic_fire;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 140 ;//140-159

                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は呪文「テンペスト」を唱えた！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else if(this.Eunique.includes("雷弱")){//氷が弱点の場合ダメージ2倍
                          this.EHp -= Damage+Damage;
                          this.num1 = Damage+Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+this.num1+"ダメージ！";
                          command.push(`${this.EName}は雷が弱点のようだ！`);
                        }
                        else{//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="電撃.png"
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_final: function(){
                      if(a <= 0){
                        command = [this.Name+"は全ての魔力を解き放った！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        //this.Action= this.Magic_fire;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = this.Mp * 5 ;//消費MPの5倍
                        this.Mp = 0;//MPを0にする
                        if(this.Eunique.includes("呪文反射")){//呪文を敵が跳ね返す場合
                          command =[this.Name+"は全ての魔力を解き放った！",this.EName+"は呪文を跳ね返した！",this.Name+"に"+Damage+"ダメージ！"];
                          this.Hp -= Damage;
                          this.num1 = Damage;
                        }
                        else {//呪文が効く場合
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          this.Scale();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Eunique.includes("呪文反射")){
                        this.Hurueru();//跳ね返された際に震えるように
                      }
                      this.text=command[a];
                      this.EfectImage="電撃.png"//:TODO アニメーション変えたい
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Pattack: function(){
                      if(a === 0){
                        command = [this.Name+"の攻撃！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Pattack;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                        //ダメージ計算
                      const Damage = this.ATk + Math.floor(Math.random() * 20) - this.EDEf;
                        let Kaisin = Math.floor(Math.random() * 10) + 1;
                        if(this.Wepon === '会心の剣'){//会心の剣を装備時、1/2の確率で会心の一撃
                          Kaisin += 3;
                        }
                      if(a === 1 ){
                        console.log("damage"+Damage);
                        console.log("EAtk"+this.ATk);
                        console.log("Def"+this.DEf);
                        if(Kaisin>=9){
                          const KaisinDamage = Damage + this.EDEf;
                          this.EHp -= KaisinDamage;
                          this.num1 = KaisinDamage;
                          //this.Tennmetu();
                          command = [this.Name+"の攻撃！","会心の一撃!",this.EName+"に"+this.num1+"ダメージ！",];
                        }
                        else if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                          console.log(a);
                        }
                        else{
                          command[1]="しかし"+this.EName+"にダメージを与えられない！";
                        }
                      }
                      if(a === 2 ){//会心の時のアニメーション
                        this.Tennmetu();
                        console.log("会心");
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Kisikaisei: function(){
                      if(a === 0){
                        command = [this.Name+"は起死回生の一撃を放った！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Kisikaisei;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                        //ダメージ計算
                      const Damage = this.ATk * 2 + Math.floor(Math.random() * 20) - this.EDEf;//2倍のダメージ
                      if(a === 1 ){
                         if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                          console.log(a);
                        }
                        else{
                          command[1]="しかし"+this.EName+"にダメージを与えられない！";
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Kaisinhittyu: function(){
                      if(a === 0){
                        command = [this.Name+"は会心必中の一撃を放った！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Kaisinhittyu;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                        //ダメージ計算
                      const Damage = this.ATk + Math.floor(Math.random() * 20);//防御を貫通
                      if(a === 1 ){
                         if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                          console.log(a);
                        }
                        else{
                          command[1]="しかし"+this.EName+"にダメージを与えられない！";
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Huiuti: function(){
                      if(a === 0){
                        command = [this.Name+"の不意打ち！",this.EName+"に"+this.num1+"ダメージ！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Huiuti;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                        //ダメージ計算
                      const Damage = Math.floor(this.ATk/5) + Math.floor(Math.random() * 5) +1;//防御を貫通するが、1/5の威力
                      if(a === 1 ){
                         if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command[1]=this.EName+"に"+Damage+"ダメージ！";
                          console.log(a);
                        }
                        else{
                          command[1]="しかし"+this.EName+"にダメージを与えられない！";
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Nidangiri: function(){
                      if(a === 0){
                        command = [this.Name+"の連続攻撃！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Nidangiri;
                        //ダメージ計算
                      if(a >=1 && a<=2 && this.EHp >0 ){//相手を倒さない限り2回攻撃する
                        const Damage = Math.floor(this.ATk*0.7) + Math.floor(Math.random() * 10) - this.EDEf;//一撃は0.7のダメージ量
                         if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command.push(`${this.EName}に${this.num1}ダメージ！`);
                          console.log(a);
                      }
                        else{
                          command.push(`ミス、${this.EName}にダメージを与えられない！`);
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Kaihukugiri: function(){
                      if(a === 0){
                        command = [this.Name+"の回復斬り！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Kaihukugiri;
                        //ダメージ計算
                      if(a === 1 ){
                        const Damage = Math.floor(this.ATk*0.8) + Math.floor(Math.random() * 10) - this.EDEf;//一撃は0.8のダメージ量
                        if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command.push(`${this.EName}に${this.num1}ダメージ！`);
                          let Heal = Math.floor(Damage/4 +1);//ダメージの1/4の回復量
                          if(Heal+this.Hp>this.MaxHp){//最大HPよりも多く回復する場合、回復量を削る
                            const q = Heal+this.Hp-this.MaxHp
                            Heal -= q;
                          }
                          if(this.Hp < this.MaxHp){//HPが満タンでない場合、回復する
                           this.num2 = Heal;
                           this.Hp += Heal;
                           command.push(`${this.Name}はHPを${this.num2}回復！`);
                          }
                          else if(this.Hp === this.MaxHp){//満タンなら回復しない
                            command.push(`${this.Name}のHPはすでに満タンのようだ`);
                          }

                          console.log(a);
                        }
                        else{
                          command.push(`ミス、${this.EName}にダメージを与えられない！`);
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Maryokugari: function(){
                      if(a === 0){
                        command = [this.Name+"の魔力狩り！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Maryokugari;
                        //ダメージ計算
                      if(a === 1 ){
                        const Damage = Math.floor(this.ATk*0.8) + Math.floor(Math.random() * 10) - this.EDEf;//一撃は0.8のダメージ量
                        if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command.push(`${this.EName}に${this.num1}ダメージ！`);
                          let Heal = Math.floor(Damage/4 +1);//ダメージの1/4の回復量
                          if(Heal+this.Mp>this.MaxMp){//最大MPよりも多く回復する場合、回復量を削る
                            const q = Heal+this.Mp-this.MaxMp
                            Heal -= q;
                          }
                          if(this.Mp < this.MaxMp){//魔力が満タンでない場合、回復する
                           this.num2 = Heal;
                           this.Mp += Heal;
                           command.push(`${this.Name}魔力を${this.num2}回復！`);
                          }
                          else if(this.Mp === this.MaxMp){//満タンなら回復しない
                            command.push(`${this.Name}の魔力はすでに満タンのようだ`);
                          }

                          console.log(a);
                        }
                        else{
                          command.push(`ミス、${this.EName}にダメージを与えられない！`);
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Kabutowari: function(){
                      if(a === 0){
                        command = [this.Name+"のかぶと割り！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Kabutowari;
                        //ダメージ計算
                      if(a === 1 ){
                        const Damage = Math.floor(this.ATk*0.8) + Math.floor(Math.random() * 10) - this.EDEf;//一撃は0.8のダメージ量
                        if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command.push(`${this.EName}に${this.num1}ダメージ！`);
                        }
                        else{
                          command.push(`ミス、${this.EName}にダメージを与えられない！`);
                        }
                        const p = Math.floor(Math.random()*2);
                        if(p ===1 && this.EHp > 0){//1/2の確率で相手の守備力を下げる(相手を倒したなら処理を飛ばす)
                          const Down = Math.floor(this.EDEf/2);
                          if(Down >= 1){//守備力が0でない限り下げる
                            this.EDEf -= Down;
                            command.push(`${this.EName}の守備力が${Down}下がった！`);
                          }
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Yaibakudaki: function(){
                      if(a === 0){
                        command = [this.Name+"の刃砕き！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Yaibakudaki;
                        //ダメージ計算
                      if(a === 1 ){
                        const Damage = Math.floor(this.ATk*0.8) + Math.floor(Math.random() * 10) - this.EDEf;//一撃は0.8のダメージ量
                        if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command.push(`${this.EName}に${this.num1}ダメージ！`);
                        }
                        else{
                          command.push(`ミス、${this.EName}にダメージを与えられない！`);
                        }
                        const p = Math.floor(Math.random()*2);
                        if(p ===1 && this.EHp > 0){//1/2の確率で相手の攻撃力を下げる(相手を倒したなら処理を飛ばす)
                          let Down = Math.floor(this.EATk/4);
                          if(this.EATk - Down < Math.floor(this.EBaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.EATk - Math.floor(this.EBaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.EATk -= Down;
                            command.push(`${this.EName}の攻撃力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.EName}の攻撃力はこれ以上下がらないようだ`);
                          }
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Skill_Midareduki: function(){
                      if(a === 0){
                        command = [this.Name+"の連続攻撃！",];
                        counter = Math.floor(Math.random() * 3) + 3;//3-5の数値を決定
                      }
                      this.SwitchOn= false;
                      this.Action= this.Skill_Midareduki;
                        //ダメージ計算
                      if(a >=1 && counter > 0 && this.EHp >0 ){//相手を倒さない限り3-5回攻撃する
                        counter -= 1;//カウンターを-1
                        const Damage = Math.floor(this.ATk*0.4) + Math.floor(Math.random() * 10) - this.EDEf;//一撃は0.7のダメージ量
                         if(Damage>0){
                          this.EHp -= Damage;
                          this.num1 = Damage;
                          this.Tennmetu();
                          command.push(`${this.EName}に${this.num1}ダメージ！`);
                          console.log(a);
                      }
                        else{
                          command.push(`ミス、${this.EName}にダメージを与えられない！`);
                        }
                      }
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Item_yakusou: function(){
                      if(a === 0){
                        command = [this.Name+"は薬草を使った！",this.Name+"はHPを40回復した！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        this.Yakusou_stock -= 1;//薬草消費
                        if(this.Hp === this.MaxHp){
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                        else{
                          this.Hp += 40;
                          if(this.Hp > this.MaxHp){//HP調整
                            this.Hp = this.MaxHp;
                            command[1]= this.Name+"のHPは満タンになった！";
                          }
                        }

                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Bannouyaku: function(){
                      if(a === 0){
                        command = [this.Name+"は万能薬を使った！",this.Name+"はHPを40回復した！",];
                        this.Bannouyaku_stock -= 1;//万能薬消費
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        if(this.Hp === this.MaxHp){
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                        else{
                          this.Hp += Math.ceil(this.MaxHp/2);//最大HPの半分を回復する(小数点切り上げ)
                          command[1]= this.Name+"はHPを"+Math.ceil(this.MaxHp/2)+"回復した！";
                          if(this.Hp > this.MaxHp){//HP調整
                            this.Hp = this.MaxHp;
                            command[1]= this.Name+"のHPは満タンになった！";
                          }
                        }
                        if(this.Joutaihennka === "毒"){//毒から回復
                          this.Joutaihennka = "なし";
                          command.push(`${this.Name}は毒から回復した！`);
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Kisekinomizu: function(){
                      if(a === 0){
                        command = [this.Name+"は奇跡の水を使った！",this.Name+"のHPは満タンになった！",];
                        this.Kisekinomizu_stock -= 1;//奇跡の水消費
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合:TODO
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                          console.log("kaihuku");
                        }
                      }
                      if(a === 1){
                        if(this.Hp === this.MaxHp){
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                        else{
                          this.Hp = this.MaxHp;//HPを全回復する
                        }
                        if(this.Joutaihennka === "毒"){//回復
                          this.Joutaihennka = "なし";
                          command.push(`${this.Name}は毒から回復した！`);
                        }
                      }
                      this.text=command[a];
                      console.log('a='+a);
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Seireinosakazuki: function(){
                      if(a === 0){
                        command = [this.Name+"は精霊の杯を使った！",this.Name+"のMPは満タンになった！",];
                        this.Seireinosakazuki_stock -= 1;//精霊の杯消費
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        if(this.Mp === this.MaxMp){
                          command[1]= this.Name+"のMPはすでに満タンのようだ";
                        }
                        else{
                          this.Mp = this.MaxMp;//MPを全回復する
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    ///回復呪文割り込み
                    Magic_subheal: function(){
                      if(a === 0){
                        command = [this.Name+"は呪文「サブヒール」を唱えた！",this.Name+"はHPを40回復した！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'magic_nonbattle'){//戦闘ではない場合:TODO
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        if(this.Hp === this.MaxHp){
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                        else{
                          this.Hp += Math.ceil(this.MaxHp/2);//最大HPの半分を回復する(小数点切り上げ)
                          command[1]= this.Name+"はHPを"+Math.ceil(this.MaxHp/2)+"回復した！";
                          if(this.Hp > this.MaxHp){//HP調整
                            this.Hp = this.MaxHp;
                            command[1]= this.Name+"のHPは満タンになった！";
                          }
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_fullheal: function(){
                      if(a === 0){
                        command = [this.Name+"は呪文「フルヒール」を唱えた！",this.Name+"のHPは満タンになった！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'magic_nonbattle'){//戦闘ではない場合:TODO
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        if(this.Hp === this.MaxHp){
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                        else{
                          this.Hp = this.MaxHp;//HPを全回復する
                        }
                        if(this.Joutaihennka === "毒"){//回復
                          this.Joutaihennka = "なし";
                          command.push(`${this.Name}は毒から回復した！`);
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Magic_fresh: function(){
                      if(a === 0){
                        command = [this.Name+"は呪文「フレッシュ」を唱えた！",this.Name+"は毒から回復した！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'magic_nonbattle'){//戦闘ではない場合:TODO
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        if(this.Joutaihennka === "なし"){
                          command[1]= "しかし何も起こらなかった";
                        }
                        else{
                          if(this.Joutaihennka === "毒"){//回復
                            this.Joutaihennka = "なし";
                            command[1]= this.Name+"は毒から回復した！";
                          }
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Dokukesi: function(){
                      if(a === 0){
                        command = [this.Name+"は毒消しを使った！",this.Name+"は毒から回復した！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        this.Dokukesi_stock -= 1;//毒消し消費
                        if(this.Joutaihennka === "なし"){
                          command[1]= "しかし使っても効果はなかったようだ";
                        }
                        else{
                          if(this.Joutaihennka === "毒"){//回復
                            this.Joutaihennka = "なし";
                            command[1]= this.Name+"は毒から回復した！";
                          }
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Seisui: function(){
                      if(a === 0){
                        command = [this.Name+"は聖水を使った！",this.Name+"は魔力を40回復した！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        this.Seisui_stock -= 1;//聖水消費
                        if(this.Mp === this.MaxMp){
                          command[1]= this.Name+"の魔力はすでに満タンのようだ";
                        }
                        else{
                          this.Mp += 40;
                          if(this.Mp > this.MaxMp){//HP調整
                            this.Mp = this.MaxMp;
                            command[1]= this.Name+"の魔力は満タンになった！";
                          }
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Coffee: function(){
                      if(a === 0){
                        command = [this.Name+"はコーヒーを使った！",this.Name+"は眠気に強くなった！",];
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      if(a === 1){
                        this.Coffee_stock -= 1;//コーヒー消費
                        if(this.Sleep <= -1){//すでにコーヒーを飲んでいる場合
                          command[1]= this.Name+"はさらに眠気に強くなった！";
                        }
                        this.Sleep -= 5;//-5眠りに強くなる
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Tikaranokajitu: function(){
                      if(a === 0){
                        command = [this.Name+"は力の果実を使った！",this.Name+"の基礎攻撃力が5上がった！",];
                        this.Tikaranokajitu_stock -= 1;//力の果実消費
                        this.BaseATk += 5;//基礎攻撃力+5
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Mamorinokajitu: function(){
                      if(a === 0){
                        command = [this.Name+"は守りの果実を使った！",this.Name+"の基礎守備力が5上がった！",];
                        this.Mamorinokajitu_stock -= 1;//守りの果実消費
                        this.BaseDEf += 5;//基礎守備力+5
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Inotinokajitu: function(){
                      if(a === 0){
                        command = [this.Name+"は命の果実を使った！",this.Name+"の最大HPが5上がった！",];
                        this.Inotinokajitu_stock -= 1;//守りの果実消費
                        this.MaxHp += 5;//最大HP+5
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Inotinokajitu: function(){
                      if(a === 0){
                        command = [this.Name+"は命の果実を使った！",this.Name+"の最大HPが5上がった！",];
                        this.Inotinokajitu_stock -= 1;//守りの果実消費
                        this.MaxHp += 5;//最大HP+5
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_Maryokunokajitu: function(){
                      if(a === 0){
                        command = [this.Name+"は魔力の果実を使った！",this.Name+"の最大MPが5上がった！",];
                        this.Maryokunokajitu_stock -= 1;//守りの果実消費
                        this.MaxMp += 5;//最大HP+5
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        if(this.NonBCommand === 'item_nonbattle'){//戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          console.log("kaihuku");
                        }
                        else{
                          this.Resetfun();
                          this.Enemyturn();
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Playerturn: function(){
                      console.log(this.EXp);
                      //生存確認
                      if(this.EHp<=0 ||this.Hp<=0){
                        this.BattleEnd();
                      }
                      else if(this.Hp > 0 && this.EHp >0 && this.turnflug === 0){
                        this.turnflug += 1;//重複を避ける:TODO
                        this.Weponeffect();
                      }
                      else{
                        this.turnflug = 0;//武器の効果発動リセット:TODO
                        this.BClist= "";
                        this.SwitchOn= true;
                        console.log('!!!');
                      }
                    },
                    ////
                    Weponeffect: function(){
                      if(this.Hp > 0 && this.EHp >0 && this.Wepon === '妖刀村正'){
                        this.Wepon_Muramasa();
                      }
                      else if(this.Hp > 0 && this.EHp >0 && this.Wepon === '力の剣'){
                        this.Wepon_Tikara();
                      }
                      else{
                        this.Shieldeffect();//何もないならシールドエフェクトへ
                      }
                    },
                    Shieldeffect: function(){
                      if(this.Hp > 0 && this.EHp >0 && this.Shield === '癒しの盾'){
                        this.Shield_Iyasi();
                      }
                      else if(this.Hp > 0 && this.EHp >0 && this.Shield === '守護の盾'){
                        this.Shield_Syugo();
                      }
                      else if(this.Hp > 0 && this.EHp >0 && this.Shield === '魔力の盾'){
                        this.Shield_Maryoku();
                      }
                      else{
                        this.Playerturn();//次のターンへ
                      }
                    },
                    /////
                    Enemyturn: function(){
                      //生存確認
                      if(this.EHp<=0 ||this.Hp<=0){
                        console.log("バトルエンド");
                        this.BattleEnd();
                      }
                      else{
                        let Asp = Math.floor(Math.random() * 100) + 1;//1-100の乱数
                        console.log("good"+Asp);
                        let p = 0;
                         //this.flag = -1;//2回行動の実験
                        while(p < this.EActions.length && Asp >= 0 && this.flag < 1){//EActionsが全て確認されるかflagがたつまで回す
                          console.log("good"+Asp);//
                          console.log("wellper"+this.EActions[p].per);//
                          Asp -= this.EActions[p].per;
                          console.log("good"+Asp);//
                            if(Asp <= 0){//Aspが0になったらAction実行し、flag+=1になる
                              this.EActions[p].action();
                                this.flag+= 1;
                                Asp += this.EActions[p].per//Aspを足し戻す
                                console.log("good2");
                            }
                          p += 1;
                          console.log("good"+Asp);
                        }
                        //もっと処理入れる
                        if(this.flag <= 0){//通常攻撃
                          this.Eattack();
                        }
                      }
                    },
                    Endphase: function(){　console.log("end");
                      // if(this.Hp <=0 && this.Migawaridama_stock >=1){//HPが0の時身代わり珠発動
                      //   this.Item_Migawaridama();
                      // }
                      if(this.Eunique.includes('2回行動')　&& dual<1){
                        this.flag = 0;//行動制限リセット
                        dual += 1;
                        this.Enemyturn();//2回行動特性は2回行動させる
                      }
                      else{//ターン終了時の処理
                        this.flag = 0;//行動制限リセット
                        dual =0;//2回行動制限リセット
                        this.Mirror = false;//呪文反射解除
                        if(this.Hp > 0 && this.Joutaihennka === "毒"){//毒のスリップダメージ
                            this.Poisondamage();
                            console.log("doku1");
                        }
                        else if(this.Hp > 0 && this.Joutaihennka === "眠り"){//毒のスリップダメージ
                            this.Sleepturn();
                        }
                        else{
                          this.Playerturn();//ターンを渡す
                        }
                      }//this.Playerturn();//ターンを渡す
                    },
                    Poisondamage: function(){
                      command = [this.Name+"は毒に侵されている",this.Name+"に"+this.num1+"ダメージ！",];
                      this.SwitchOn= false;
                      this.Action= this.Poisondamage;
                      console.log("doku");
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Playerturn();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 5) + 5;
                        console.log("damage"+Damage);
                        this.Hp -= Damage;
                        this.num1 = Damage;
                        this.Hurueru();
                        command[1]=this.Name+"に"+Damage+"ダメージ！";
                        console.log("doku2");
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Wepon_Muramasa: function(){
                      command = ["妖刀村正が怪しく光った！",this.Name+"はHPを"+this.num1+"回復！",];
                      this.SwitchOn= false;
                      this.Action= this.Wepon_Muramasa;
                      console.log("doku");
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        //:TODOこうするしかない？
                        this.Shieldeffect();//シールドエフェクトに遷移する
                      }
                      if(a === 1 ){
                        let Heal = Math.floor(Math.random() * 5) + 5;
                        if(this.Hp + Heal > this.MaxHp){//最大HPより回復量が多くなる場合
                            Heal = this.MaxHp - this.Hp;//回復量を調整する
                          }
                        if(Heal > 0){//回復する場合
                          this.num1 = Heal;
                          this.Hp += Heal;
                          command[1]=this.Name+"はHPを"+this.num1+"回復！";
                        }
                        else{//しない場合
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Wepon_Tikara: function(){
                      command = ["力の剣が光り輝いた！",this.Name+"の攻撃力が"+this.num1+"上がった！",];
                      this.SwitchOn= false;
                      this.Action= this.Wepon_Tikara;
                      console.log("doku");
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        //:TODOこうするしかない？
                        this.Shieldeffect();//シールドエフェクトに遷移する
                      }
                      if(a === 1 ){
                        console.log(111);
                        let Up = Math.floor(Math.random() * 5) + 6;//6-10
                        if(Up + this.ATk > this.BaseATk*5){//基礎攻撃力の5倍になる場合は、上昇量を減らす
                          const q = Up + this.ATk - this.BaseATk*5;
                          Up -= q;
                        }
                        if(Up > 0){
                          this.ATk += Up;
                          this.num1 = Up;
                          command[1]=this.Name+"の攻撃力が"+this.num1+"上がった！";
                          console.log(1161);
                        }
                        else{//これ以上上がらない場合
                          command[1]=this.Name+"の攻撃力はこれ以上上がらないようだ";
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Shield_Iyasi: function(){
                      command = ["癒しの盾は波動を発した！",this.Name+"はHPを"+this.num1+"回復！",];
                      this.SwitchOn= false;
                      this.Action= this.Shield_Iyasi;
                      console.log("doku");
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        //:TODOこうするしかない？
                        this.Playerturn();//次のターンへ
                      }
                      if(a === 1 ){
                        let Heal = Math.floor(Math.random() * 5) + 5;
                        if(this.Hp + Heal > this.MaxHp){//最大HPより回復量が多くなる場合
                            Heal = this.MaxHp - this.Hp;//回復量を調整する
                          }
                        if(Heal > 0){//回復する場合
                          this.num1 = Heal;
                          this.Hp += Heal;
                          command[1]=this.Name+"はHPを"+this.num1+"回復！";
                        }
                        else{//しない場合
                          command[1]= this.Name+"のHPはすでに満タンのようだ";
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Shield_Syugo: function(){
                      command = ["守護の盾が光り輝いた！",this.Name+"の守備力が"+this.num1+"上がった！",];
                      this.SwitchOn= false;
                      this.Action= this.Shield_Syugo;
                      console.log("doku");
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        //:TODOこうするしかない？
                        this.Playerturn();//シールドエフェクトに遷移する
                      }
                      if(a === 1 ){
                        console.log(111);
                        let Up = Math.floor(Math.random() * 5) + 6;//6-10
                        if(Up + this.DEf > this.BaseDEf*3){//基礎守備力の3倍になる場合は、上昇量を減らす
                          const q = Up + this.DEf - this.BaseDEf*3;
                          Up -= q;
                        }
                        if(Up > 0){
                          this.DEf += Up;
                          this.num1 = Up;
                          command[1]=this.Name+"の守備力が"+this.num1+"上がった！";
                          console.log(1161);
                        }
                        else{//これ以上上がらない場合
                          command[1]=this.Name+"の守備力はこれ以上上がらないようだ";
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Shield_Maryoku: function(){
                      command = ["魔力の盾は波動を発した！",this.Name+"はMPを"+this.num1+"回復！",];
                      this.SwitchOn= false;
                      this.Action= this.Shield_Maryoku;
                      console.log("doku");
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        //:TODOこうするしかない？
                        this.Playerturn();//次のターンへ
                      }
                      if(a === 1 ){
                        let Heal = Math.floor(Math.random() * 5) + 1;
                        if(this.Mp + Heal > this.MaxMp){//最大MPより回復量が多くなる場合
                            Heal = this.MaxMp - this.Mp;//回復量を調整する
                          }
                        if(Heal > 0){//回復する場合
                          this.num1 = Heal;
                          this.Mp += Heal;
                          command[1]=this.Name+"はMPを"+this.num1+"回復！";
                        }
                        else{//しない場合
                          command[1]= this.Name+"のMPはすでに満タンのようだ";
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    // Item_Migawaridama: function(){//HPがOの時自動で発動
                    //   this.SwitchOn= false;
                    //   this.Action= this.Item_Migawaridama;
                    //   if(a === -1){//やむを得ない:TODO
                    //     a = 0;//やむを得ない:TODO
                    //     command = ["身代わり珠が瀕死の"+this.Name+"を救った！",this.Name+"はHPを"+this.num1+"回復！",];
                    //     this.Migawaridama_stock -= 1;//身代わり珠消費
                    //     console.log('migawari?');
                    //   }
                    //   console.log(command);
                    //   console.log('a='+a);
                    //   if(a === 0 ){//やむを得ない:TODO
                    //     //ダメージ計算
                    //     const Heal = Math.ceil(this.MaxHp/2 - this.Hp);//必ずHPを半分まで回復させる
                    //     this.Hp += Heal;
                    //     this.num1 = Heal;
                    //     console.log('HP'+this.Hp);
                    //     command[1]=this.Name+"はHPを"+this.num1+"回復！";
                    //     if(this.Mp < Math.ceil(this.MaxMp/2)){//MPが半分以下の場合
                    //       const MHeal = Math.ceil(this.MaxMp/2) - this.Mp;//必ずMPを半分まで回復させる
                    //       this.Mp += MHeal;
                    //       this.num1 = MHeal;
                    //       command.push(`${this.Name}はMPを${this.num1}回復！`);
                    //     }
                    //   }
                    //   if(a === command.length){
                    //     a= -1;
                    //     this.Resetfun();
                    //     this.Endphase();//エンドフェイズに戻る、敵が2回行動なら、2回目の行動に入る
                    //   }
                    //   this.text=command[a];
                    //   this.msg2=a;
                    //   a+=1;
                    // },
                    Sleepturn: function(){//眠っている時の挙動
                      if(a <= 0){
                        if(this.Sleep<= 0){
                        this.Joutaihennka = "なし"
                        command = [this.Name+"は目を覚ました！",];
                        }else if(this.Sleep>0)
                        command = [this.Name+"は眠っている",];
                        this.Sleep -= 1;//眠りターン数を減らす
                      }
                      this.SwitchOn= false;
                      this.Action= this.Sleepturn;
                      if(a === command.length　&& this.Joutaihennka === "なし"){
                        a= -1;
                        this.Resetfun();
                        this.Playerturn();//ターンを渡す
                      }
                      else if(a === command.length　&& this.Joutaihennka === "眠り"){
                        a= -1;
                        this.Resetfun();
                        this.Enemyturn();//ターンを渡す
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },

                    Eattack: function(){
                      command = [this.EName+"の攻撃！",this.Name+"に"+this.num1+"ダメージ！",];
                      this.SwitchOn= false;
                      this.Action= this.Eattack;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                        //this.Playerturn();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = this.EATk + Math.floor(Math.random() * 20) - this.DEf;
                        console.log("damage"+Damage);
                        console.log("EAtk"+this.EATk);
                        console.log("Def"+this.DEf);

                        if(Damage>0){
                          this.Hp -= Damage;
                          this.num1 = Damage;
                          this.Hurueru();
                          command[1]=this.Name+"に"+Damage+"ダメージ！";
                          console.log(a);
                        }
                        else{
                          command[1]=this.Name+"は攻撃から身を守った！";
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    EAttack2: function(texta,damage,per1,mp1,perm,Atk,per2,Dfe,per3,State,per4){
                      if(a===-1){
                      this.texta=texta;
                      this.damage1=damage;
                      this.per1=per1;
                      this.mp1=mp1;
                      this.perm=perm;
                      this.Atk1=Atk;
                      this.per2=per2;
                      this.Dfe=Dfe;
                      this.per3=per3;
                      this.State=State;
                      this.per4=per4;
                      this.EAttack2flag=0;//
                      console.log("???qqq");
                      command = [`${this.EName}${this.texta}`,];//繰り返しにしない
                      }
                      this.SwitchOn= false;
                      this.Action= this.EAttack2;
                      console.log("???");
                      if(a === 1 ){
                        console.log(112372);
                        const Per_1 = this.per1 - Math.floor(Math.random() * 100);//per1が0より大きくなれば成功
                        const Damage_1 = this.damage1+this.EATk+ Math.floor(Math.random() * 20) - this.DEf;//攻撃力-守備力
                        if(Per_1 > 0 && Damage_1 > 0){//あたった場合
                         this.Hp -= Damage_1;
                         this.Hurueru();
                         this.num1 = Damage_1;
                         console.log(11232);
                         command.push(`${this.Name}に${this.num1}ダメージ！`);
                         this.EAttack2flag =1;//当たり判定
                        }
                        else {//当たらない場合
                          command.push(`${this.Name}は攻撃から身を守った！`);
                        }
                      }
                      if(a === 1 && this.Hp > 0 && this.EAttack2flag >0){//攻撃が当たって生きている場合、MPが減る
                        console.log(112372);
                        const Per_M = this.perm - Math.floor(Math.random() * 100);//perMが0より大きくなれば成功
                        if(Per_M > 0){//成功した場合
                          let Down = this.mp1;
                          if(this.Mp < Down ){//MPが尽きる、または尽きている場合
                            Down = this.Mp;//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.Mp -= Down;
                            command.push(`${this.Name}はMPを${this.num1}失った！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}のMPはすでに尽きている`);
                          }
                        }
                      }
                      if(a === 1 && this.Hp > 0 && this.EAttack2flag >0){//攻撃が当たって生きている場合、攻撃力が下がる
                        const Per2 = this.per2 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per2 > 0){//成功した場合
                          let Down = this.Atk1;
                          if(this.ATk - Down < Math.floor(this.BaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.ATk - Math.floor(this.BaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.ATk -= Down;
                            command.push(`${this.Name}の攻撃力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の攻撃力はこれ以上下がらないようだ`);
                          }
                        }
                      }
                      if(a === 1 && this.Hp > 0 && this.EAttack2flag >0){//攻撃が当たって生きている場合、守備力が下がる
                        let Per3 = this.per3 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per3 > 0){//成功した場合
                          let Down = this.Dfe;
                          if(this.DEf - Down < Math.floor(this.BaseDEf/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.DEf - Math.floor(this.BaseDEf/4);//下がる量を調整する
                          }
                          console.log('aas');
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.DEf -= Down;
                            command.push(`${this.Name}の守備力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の守備力はこれ以上下がらないようだ`);
                          }

                        }
                      }
                      if(a === 1 && this.Hp > 0 && this.EAttack2flag >0){//攻撃が当たって生きている場合、状態異常になる
                        const Per4 = this.per4 - Math.floor(Math.random() * 100);//per4が0より大きくなれば成功
                        if(Per4 > 0){//成功した場合
                          if(this.Joutaihennka === "なし" && this.State === "毒"){
                           command.push(this.Name+"は毒に侵された！");
                           this.Joutaihennka = "毒";//状態変化がなければ毒状態にする
                          }
                          if(this.Joutaihennka === "なし" && this.State === "眠り"){
                           command.push(this.Name+"は眠ってしまった！");
                           this.Joutaihennka = "眠り";//状態変化がなければ毒状態にする
                           this.Sleep += Math.floor(Math.random() * 4) +1;//眠るターンを決める
                          }
                        }
                      }
                      if(a === command.length){//TODO:
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                      }
                      this.text=command[a];
                      console.log(command);
                      this.msg2=a;
                      a+=1;
                    },
                    huiuti: function(){
                      if(this.Joutaihennka !== "なし" ){//不要な時に飛ばす処理:TODO
                        //a -= 1;
                        this.flag -= 1;
                      }
                      else{
                       this.EAttack2('の不意打ち攻撃！',10,100,5,100,100,100,10,50,'眠り',50)
                      }
                    },
                    Eskill: function(texta,damage,per1,mp1,perm,Atk,per2,Dfe,per3,State,per4){
                      if(a===-1){
                      this.texta=texta;
                      this.damage1=damage;
                      this.per1=per1;
                      this.mp1=mp1;
                      this.perm=perm;
                      this.Atk1=Atk;
                      this.per2=per2;
                      this.Dfe=Dfe;
                      this.per3=per3;
                      this.State=State;
                      this.per4=per4;
                      console.log("???qqq");
                      command = [`${this.EName}${this.texta}`,];//繰り返しにしない
                      }
                      this.SwitchOn= false;
                      this.Action= this.Eskill;
                      console.log("???");
                      if(a === 1 ){
                        console.log(112372);
                        const Per_1 = this.per1 - Math.floor(Math.random() * 100);//per1が0より大きくなれば成功
                        if(Per_1 > 0 ){//あたった場合
                         const Damage_1 = this.damage1+ Math.floor(Math.random() * 20) +1;
                         this.Hp -= Damage_1;
                         this.Hurueru();
                         this.num1 = Damage_1;
                         console.log(11232);
                         command.push(`${this.Name}に${this.num1}ダメージ！`);
                        }
                      }
                      if(a === 1 && this.Hp > 0){//生きている場合、MPが減る
                        console.log(112372);
                        const Per_M = this.perm - Math.floor(Math.random() * 100);//perMが0より大きくなれば成功
                        if(Per_M > 0){//成功した場合
                          let Down = this.mp1;
                          if(this.Mp < Down ){//MPが尽きる、または尽きている場合
                            Down = this.Mp;//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.Mp -= Down;
                            command.push(`${this.Name}はMPを${this.num1}失った！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}のMPはすでに尽きている`);
                          }
                        }
                      }
                      if(a === 1 && this.Hp > 0){//生きている場合、攻撃力が下がる
                        const Per2 = this.per2 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per2 > 0){//成功した場合
                          let Down = this.Atk1;
                          if(this.ATk - Down < Math.floor(this.BaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.ATk - Math.floor(this.BaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.ATk -= Down;
                            command.push(`${this.Name}の攻撃力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の攻撃力はこれ以上下がらないようだ`);
                          }
                        }
                      }
                      if(a === 1 && this.Hp > 0){//生きている場合、守備力が下がる
                        let Per3 = this.per3 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per3 > 0){//成功した場合
                          let Down = this.Dfe;
                          if(this.DEf - Down < Math.floor(this.BaseDEf/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.DEf - Math.floor(this.BaseDEf/4);//下がる量を調整する
                          }
                          console.log('aas');
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.DEf -= Down;
                            command.push(`${this.Name}の守備力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の守備力はこれ以上下がらないようだ`);
                          }

                        }
                      }
                      if(a === 1 && this.Hp > 0){//生きている場合、状態異常になる
                        const Per4 = this.per4 - Math.floor(Math.random() * 100);//per4が0より大きくなれば成功
                        if(Per4 > 0){//成功した場合
                          if(this.Joutaihennka === "なし" && this.State === "毒"){
                           command.push(this.Name+"は毒に侵された！");
                           this.Joutaihennka = "毒";//状態変化がなければ毒状態にする
                          }
                          if(this.Joutaihennka === "なし" && this.State === "眠り"){
                           command.push(this.Name+"は眠ってしまった！");
                           this.Joutaihennka = "眠り";//状態変化がなければ毒状態にする
                           this.Sleep += Math.floor(Math.random() * 4) +1;//眠るターンを決める
                          }
                        }
                      }
                      if(a === 1 && command.length === 1){//何も起こらなかった場合
                        command.push(this.Name+"には効かなかった！");
                      }
                      if(a === command.length){//TODO:
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                      }
                      this.text=command[a];
                      console.log(command);
                      this.msg2=a;
                      a+=1;
                    },
                    tyohatu: function(){
                      this.Eskill("は挑発した！",30,100,9,100,10,100,100,50,0,0)
                    },
                    hono60: function(){
                      this.Eskill("は炎を吐き出した！",60,100,0,0,0,0,0,0,0,0)
                    },
                    EBaff: function(texta,damage,per1,Atk,per2,Dfe,per3,){
                      if(a===-1){//-1を０にする
                      this.texta=texta;
                      this.damage1=damage;
                      this.per1=per1;
                      this.Atk1=Atk;
                      this.per2=per2;
                      this.Dfe=Dfe;
                      this.per3=per3;
                      console.log("???qqq");
                      command = [`${this.EName}${this.texta}`,];//繰り返しにしない
                      }
                      this.SwitchOn= false;
                      this.Action= this.EBaff;
                      console.log("???");
                      if(a === 1 ){
                        console.log(112372);
                        const Per_1 = this.per1 - Math.floor(Math.random() * 100);//per1が0より大きくなれば成功
                        if(Per_1 > 0 ){//成功した場合
                          let Heal = this.damage1;
                          if(this.EHp + Heal > this.EMaxHp){//最大HPより回復量が多くなる場合
                            Heal = this.EMaxHp - this.EHp;//回復量を調整する
                          }
                          if(Heal > 0){//回復する場合
                            this.num1 = Heal;
                            this.EHp += Heal;
                            command.push(`${this.EName}はHPを${this.num1}回復！`);
                          }
                          else{//しない場合
                            command.push(`${this.Name}のHPはすでに満タンのようだ`);
                          }
                        }
                      }
                      if(a === 1 && this.Hp > 0){//生きている場合、攻撃力が上がる
                        const Per2 = this.per2 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per2 > 0){//成功した場合
                          let Up = this.Atk1;
                          console.log('Up='+Up);
                          console.log('EBaseATk='+this.EBaseATk+'EATk='+this.EATk);
                          if(this.EATk + Up > this.EBaseATk * 3) {//基礎攻撃力の3倍以上になる場合
                            Up = this.EBaseATk * 3 - this.EATk;//上がる量を調整する
                          }
                          if(Up > 0){//上がる場合
                            this.num1 = Up;
                            this.EATk += Up;
                            command.push(`${this.EName}の攻撃力が${this.num1}上がった！`);
                          }
                          else{//上がらない場合
                            command.push(`${this.EName}の攻撃力はこれ以上上がらないようだ`);
                          }
                        }
                      }
                      if(a === 1 && this.Hp > 0){//生きている場合、守備力が上がる
                        let Per3 = this.per3 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per3 > 0){//成功した場合
                          let Up = this.Dfe;
                          if(this.EDEf + Up > this.EBaseDEf * 3) {//基礎守備力の3倍以上になる場合
                            Up = this.EBaseDEf * 3 - this.EDEf;//上がる量を調整する
                          }
                          if(Up > 0){//上がる場合
                            this.num1 = Up;
                            this.EDEf += Up;
                            command.push(`${this.EName}の守備力が${this.num1}上がった！`);
                          }
                          else{//上がらない場合
                            command.push(`${this.EName}の守備力はこれ以上上がらないようだ`);
                          }
                        }
                      }
                      if(a === 1 && command.length === 1){//何も起こらなかった場合
                        command.push("しかし何も起こらなかった！");
                      }
                      if(a === command.length){//
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                      }
                      this.text=command[a];
                      console.log(command);
                      this.msg2=a;
                      a+=1;
                    },
                    Einoru: function(){
                      if(this.EATk > this.DEf || this.EATk > this.EBaseATk*2){//不要な時に飛ばす処理
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は祈りを捧げた！',100,100,60,100,100,100)                      }
                    },
                    EMagic: function(texta,damage,per1,Atk,per2,Dfe,per3,State,per4){
                      if(a===-1){
                      this.texta=texta;
                      this.damage1=damage;
                      this.per1=per1;
                      this.Atk1=Atk;
                      this.per2=per2;
                      this.Dfe=Dfe;
                      this.per3=per3;
                      this.State=State;
                      this.per4=per4;
                      this.hansyadamage = 0;//反射ダメージリセット
                      console.log("???qqq");
                      command = [`${this.EName}${this.texta}`,];//繰り返しにしない
                      }
                      if(a === 2 && this.Mirror === true && this.hansyadamage >= 1){//反射して敵がダメージを受ける時
                        this.Tennmetu();
                        console.log("tenmetu");
                      }
                      this.SwitchOn= false;
                      this.Action= this.EMagic;
                      console.log("???");
                      if(a === 1 && this.Mirror === true){//反射時
                        command.push(`${this.Name}は呪文を跳ね返した！`);
                        console.log(112372);
                        const Per_1 = this.per1 - Math.floor(Math.random() * 100);//per1が0より大きくなれば成功
                        if(Per_1 > 0 ){//あたった場合
                         const Damage_1 = this.damage1 + Math.floor(Math.random() * 20) +1;
                         this.EHp -= Damage_1;
                         //this.Hurueru();反射した時は震えない
                         this.num1 = Damage_1;
                         console.log(11232);
                         command.push(`${this.EName}に${this.num1}ダメージ！`);
                         this.hansyadamage = Damage_1;
                        }
                      }
                      else if(a === 1 ){//反射しない場合
                        console.log(112372);
                        const Per_1 = this.per1 - Math.floor(Math.random() * 100);//per1が0より大きくなれば成功
                        if(Per_1 > 0 ){//あたった場合
                         const Damage_1 = this.damage1 + Math.floor(Math.random() * 20) +1;
                         this.Hp -= Damage_1;
                         this.Hurueru();
                         this.num1 = Damage_1;
                         console.log(11232);
                         command.push(`${this.Name}に${this.num1}ダメージ！`);
                        }
                      }//////

                      if(a === 1 && this.EHp > 0 && this.Mirror === true){//反射して敵が生きている場合、攻撃力が下がる
                        const Per2 = this.per2 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per2 > 0){//成功した場合
                          let Down = this.Atk1;
                          if(this.EATk - Down < Math.floor(this.EBaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.EATk - Math.floor(this.EBaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.EATk -= Down;
                            command.push(`${this.EName}の攻撃力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.EName}の攻撃力はこれ以上下がらないようだ`);
                          }

                        }
                      }
                      else if(a === 1 && this.Hp > 0){//反射せず生きている場合、攻撃力が下がる
                        const Per2 = this.per2 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per2 > 0){//成功した場合
                          let Down = this.Atk1;
                          if(this.ATk - Down < Math.floor(this.BaseATk/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.ATk - Math.floor(this.BaseATk/4);//下がる量を調整する
                          }
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.ATk -= Down;
                            command.push(`${this.Name}の攻撃力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の攻撃力はこれ以上下がらないようだ`);
                          }

                        }
                      }//////
                      if(a === 1 && this.EHp > 0 && this.Mirror === true){//反射して敵が生きている場合、守備力が下がる
                        let Per3 = this.per3 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per3 > 0){//成功した場合
                          let Down = this.Dfe;
                          if(this.EDEf - Down < Math.floor(this.EBaseDEf/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.EDEf - Math.floor(this.EBaseDEf/4);//下がる量を調整する
                          }
                          console.log('aas');
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.DEf -= Down;
                            command.push(`${this.EName}の守備力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.EName}の守備力はこれ以上下がらないようだ`);
                          }

                        }
                      }
                      else if(a === 1 && this.Hp > 0){//反射せず自分が生きている場合、守備力が下がる
                        let Per3 = this.per3 - Math.floor(Math.random() * 100);//per2が0より大きくなれば成功
                        if(Per3 > 0){//成功した場合
                          let Down = this.Dfe;
                          if(this.DEf - Down < Math.floor(this.BaseDEf/4)){//基礎攻撃力の1/4以下になる場合
                            Down = this.DEf - Math.floor(this.BaseDEf/4);//下がる量を調整する
                          }
                          console.log('aas');
                          if(Down > 0){//下がる場合
                            this.num1 = Down;
                            this.DEf -= Down;
                            command.push(`${this.Name}の守備力が${this.num1}下がった！`);
                          }
                          else{//下がらない場合
                            command.push(`${this.Name}の守備力はこれ以上下がらないようだ`);
                          }

                        }
                      }//////
                      if(a === 1 && this.Hp > 0 && this.Mirror === false){//反射せず、生きている場合、状態異常になる
                        const Per4 = this.per4 - Math.floor(Math.random() * 100);//per4が0より大きくなれば成功
                        if(Per4 > 0){//成功した場合
                          if(this.Joutaihennka === "なし" && this.State === "毒"){
                           command.push(this.Name+"は毒に侵された！");
                           this.Joutaihennka = "毒";//状態変化がなければ毒状態にする
                          }
                          if(this.Joutaihennka === "なし" && this.State === "眠り"){
                           command.push(this.Name+"は眠ってしまった！");
                           this.Joutaihennka = "眠り";//状態変化がなければ毒状態にする
                           this.Sleep += Math.floor(Math.random() * 4) +1;//眠るターンを決める
                          }
                        }
                      }
                      if(a === 1 && command.length === 1){//何も起こらなかった場合
                        command.push(this.Name+"には効かなかった！");
                      }
                      else if(a === 1 && command.length === 2 && this.Mirror === true){//敵に反射して何も起こらなかった場合
                        command.push(this.EName+"には効かなかった！");
                      }
                      if(a === command.length){//TODO:
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                      }
                      this.text=command[a];
                      console.log(command);
                      console.log('a='+a),
                      this.msg2=a;
                      a+=1;
                    },
                    EMagic_test: function(){
                      this.EMagic("はエニグマを唱えた！",0,0,20,100,20,100,"毒",100)
                    },
                    EKaisin: function(){
                      command = [this.EName+"の攻撃！","会心の一撃!",this.Name+"に"+this.num1+"ダメージ！",];
                      this.SwitchOn= false;
                      this.Action= this.EKaisin;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                        //this.Playerturn();//ターンを渡す
                      }
                      if(a === 2 ){
                        //ダメージ計算
                        const Damage = this.EATk + Math.floor(Math.random() * 20) +1 ;

                        if(Damage>0){
                          this.Hp -= Damage;
                          this.num1 = Damage;
                          this.Hurueru();
                          command[2]=this.Name+"に"+Damage+"ダメージ！";
                          console.log(a);
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    E_Text: function(text1){
                      if(a===-1){
                      console.log("???qqq");
                      command = text1;//テキストを読みこむ
                      }
                      this.SwitchOn= false;
                      this.Action= this.E_Text;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                        //this.Playerturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"=a");
                      this.msg2=a;
                      a+=1;
                    },
                    EPoisonattack: function(){
                      if(a <= 0){
                        command = [this.EName+"の毒攻撃！",this.Name+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        this.Action= this.EPoisonattack;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                        //this.Playerturn();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = this.EATk + Math.floor(Math.random() * 20) - this.DEf;
                        console.log("damage"+Damage);
                        console.log("EAtk"+this.EATk);
                        console.log("Def"+this.DEf);

                        if(Damage>0){
                          this.Hp -= Damage;
                          this.num1 = Damage;
                          this.Hurueru();
                          command[1]=this.Name+"に"+Damage+"ダメージ！";
                          if(this.Joutaihennka === "なし"){
                           command.push(this.Name+"は毒に侵された！");
                           this.Joutaihennka = "毒";//状態変化がなければ毒状態にする
                          }
                          console.log(a);
                        }
                        else{
                          command[1]=this.Name+"は攻撃から身を守った！";
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    EMagic_fire: function(){
                      if(a <= 0){
                        command = [this.EName+"は呪文「ファイア」を唱えた！",this.Name+"に"+this.num1+"ダメージ！",];
                      }
                        this.SwitchOn= false;
                        this.Action= this.EMagic_fire;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                        //this.Playerturn();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Damage = Math.floor(Math.random() * 20) + 20 ;//20-39
                        console.log("damage"+Damage);
                        console.log("EAtk"+this.EATk);
                        console.log("Def"+this.DEf);

                        if(this.Mirror === true){//呪文をプレイヤーが跳ね返す場合
                          command =[this.EName+"は呪文「ファイア」を唱えた！",this.Name+"は呪文を跳ね返した！",this.EName+"に"+Damage+"ダメージ！"];
                          this.EHp -= Damage;
                          this.num1 = Damage;
                        }
                        else{//呪文が効く場合
                          this.Hp -= Damage;
                          this.num1 = Damage;
                          this.Hurueru();
                          command[1]=this.Name+"に"+Damage+"ダメージ！";
                        }
                      }
                      if(a === 2 && this.Mirror === true){
                        this.Tennmetu();//跳ね返した際に敵が点滅するように
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    ESleep: function(){
                      if(this.Joutaihennka !== "なし" && a<= 0){//不要な時に飛ばす処理:TODO
                        a -= 1;
                        this.flag -= 1;
                      }
                      else if(a <= 0){
                        command = [this.EName+"は甘い息を吹きかけた！",this.Name+"は眠ってしまった!",];
                      }
                        this.SwitchOn= false;
                        this.Action= this.ESleep;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();
                        //this.Playerturn();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        const Per = Math.floor(Math.random() * 10) +1;

                        if(Per>5 && this.Joutaihennka === "なし"){
                          this.Joutaihennka = "眠り";
                          this.Sleep += Math.floor(Math.random() * 4) +1;//眠るターンを決める
                        }
                        else{
                          command[1]=this.Name+"には効かなかった！";//眠らない場合
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Eheal: function(){
                      command = [this.EName+"は薬草を使った！",this.EName+"はHPを40回復した！",];
                      this.SwitchOn= false;
                      this.Action= this.Eheal;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        this.EHp += 40;
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Eheal80: function(){
                      command = [this.EName+"は薬草を使った！",this.EName+"はHPを80回復した！",];
                      this.SwitchOn= false;
                      this.Action= this.Eheal80;
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        this.Endphase();//ターンを渡す
                      }
                      if(a === 1 ){
                        //ダメージ計算
                        this.EHp += 80;
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Wepon_change: function(){
                      if(this.NonBClist === 'Wepon'){
                        command = [this.Name+"は"+this.Wepon+"を装備した！",];
                      }
                      else if(this.NonBClist === 'Shield'){
                        command = [this.Name+"は"+this.Shield+"を装備した！",];
                      }
                      this.SwitchOn= false;
                      this.Action= this.Wepon_change;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    WeponShield_buy: function(item,gold){//武器か防具を買う
                        command = [this.Name+"は"+gold+"G払って"+item+"を手に入れた！",];

                      this.SwitchOn= false;
                      //this.Action= this.WeponShield_buy(item,gold);
                      if(a === 0){
                        const p = this.AllWeponShield.indexOf(item);
                        this.AllWeponShield.splice(p,1);//持っていないリストから削除
                        //
                        this.UseWeponShield.push(item);//持っているリストに追加
                        //
                        this.Gold -= gold;//お金を差し引く
                      }
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//ターンを渡す
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    WeponShield_sell: function(item,gold){//武器か防具を売る
                        command = [this.Name+"は"+item+"を売って"+gold+"Gを手に入れた！",];

                      this.SwitchOn= false;
                      //this.Action= this.WeponShield_buy(item,gold);
                      if(a === 0){
                        const p = this.UseWeponShield.indexOf(item);
                        this.UseWeponShield.splice(p,1);//持っているリストから削除
                        //
                        this.AllWeponShield.push(item);//持っていないリストに追加
                        //
                        this.Gold += gold;//お金を足す
                      }
                      if(item === this.Wepon){//売った武器が装備中だった場合、装備を外す
                        this.Wepon = "";
                        this.WeponATk = 0;
                        console.log("Wepon is sold.");
                      }
                      if(item === this.Shield){//売った防具が装備中だった場合、装備を外す
                        this.Shield = "";
                        this.WeponDEf = 0;
                        console.log("Shield is sold.");
                      }
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//ターンを渡す
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_buy: function(item,gold){//道具を買う
                        command = [this.Name+"は"+gold+"G払って"+item+"を手に入れた！",];

                      this.SwitchOn= false;
                      //this.Action= this.WeponShield_buy(item,gold);
                      if(a === 0){
                        if(item === '薬草'){//リファクタしたい箇所
                          this.Yakusou_stock += 1;
                        }
                        else if(item === '毒消し'){
                          this.Dokukesi_stock += 1;
                        }
                        else if(item === '聖水'){
                          this.Seisui_stock += 1;
                        }
                        else if(item === '万能薬'){
                          this.Bannouyaku_stock += 1;
                        }
                        else if(item === 'コーヒー'){
                          this.Coffee_stock += 1;
                        }
                        else if(item === '奇跡の水'){
                          this.Kisekinomizu_stock += 1;
                        }
                        else if(item === '精霊の杯'){
                          this.Seireinosakazuki_stock += 1;
                        }
                        else if(item === '力の果実'){
                          this.Tikaranokajitu_stock += 1;
                        }
                        else if(item === '守りの果実'){
                          this.Mamorinokajitu_stock += 1;
                        }
                        else if(item === '命の果実'){
                          this.Inotinokajitu_stock += 1;
                        }
                        else if(item === '魔力の果実'){
                          this.Maryokunokajitu_stock += 1;
                        }
                        //
                        this.Gold -= gold;//お金を差し引く
                      }
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//ターンを渡す
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Item_sell: function(item,gold){//道具を売る
                        command = [this.Name+"は"+item+"を売って"+gold+"Gを手に入れた！",];

                      this.SwitchOn= false;
                      //this.Action= this.WeponShield_buy(item,gold);
                      if(a === 0){
                        if(item === '薬草'){//リファクタしたい箇所
                          this.Yakusou_stock -= 1;
                        }
                        else if(item === '毒消し'){
                          this.Dokukesi_stock -= 1;
                        }
                        else if(item === '聖水'){
                          this.Seisui_stock -= 1;
                        }
                        else if(item === '万能薬'){
                          this.Bannouyaku_stock -= 1;
                        }
                        else if(item === 'コーヒー'){
                          this.Coffee_stock -= 1;
                        }
                        else if(item === '奇跡の水'){
                          this.Kisekinomizu_stock -= 1;
                        }
                        else if(item === '精霊の杯'){
                          this.Seireinosakazuki_stock -= 1;
                        }
                        else if(item === '力の果実'){
                          this.Tikaranokajitu_stock -= 1;
                        }
                        else if(item === '守りの果実'){
                          this.Mamorinokajitu_stock -= 1;
                        }
                        else if(item === '命の果実'){
                          this.Inotinokajitu_stock -= 1;
                        }
                        else if(item === '魔力の果実'){
                          this.Maryokunokajitu_stock -= 1;
                        }
                        //
                        this.Gold += gold;//お金を足す
                      }
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//ターンを渡す
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Goahead: function(){
                      this.Gopoint += 1;
                      this.Noivent = 0;//Noiventsを解除
                      if(this.Stage === 1){//Stage毎にアクションは変わる
                        this.stagename ="STAGE1：草原";
                        this.stagelength = 9;
                        this.Stage1();
                      }
                      if(this.Stage === 2){//Stage毎にアクションは変わる
                        this.stagename ="STAGE2：沼地";
                        this.stagelength = 10;
                        this.Stage2();
                      }
                      if(this.Stage === 3){//Stage毎にアクションは変わる
                        this.stagename ="STAGE3：荒野";
                        this.stagelength = 10;
                        this.Stage3();
                      }
                      if(this.Stage === 4){//Stage毎にアクションは変わる
                        this.stagename ="STAGE2：洞窟";
                        this.stagelength = 10;
                        this.Stage4();
                      }
                      if(this.Stage === 5){//Stage毎にアクションは変わる
                        this.Stage5();
                      }
                      if(this.Stage === 6){//Stage毎にアクションは変わる
                        this.stagename ="STAGE3：森";
                        this.stagelength = 15;
                        this.Stage6();
                      }
                      if(this.Stage === 7){//Stage毎にアクションは変わる
                        this.stagename ="STAGE3：海";
                        this.stagelength = 18;
                        this.Stage7();
                      }
                      if(this.Stage === 9){//Stage毎にアクションは変わる
                        this.stagename ="STAGE4：魔界";
                        this.stagelength = 12;
                        this.Stage9();
                      }
                      if(this.Stage === 10){//Stage毎にアクションは変わる
                        this.Lastboss();
                      }
                    },
                    Lookaround: function(){
                      const p = Math.floor(Math.random() * 3);
                      if(p < 1 || this.Noivent >= 1 || this.Stage === 10){//1/3の確率でNoiventsになる,ラスボス前は何も起こさない
                        this.Noivents();
                        console.log("NOaction");
                      }
                      else{
                        this.Gopoint -= 1;//前には進まないようにする
                        this.Goahead();
                      }
                    },
                    Stage1: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.BackImage !== "stage1"){//背景をstageに即したものにする
                        this.BackImage = "stage1";
                      }
                      const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 7 && this.Doneivent !== "Stage1_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage1_Bossmae";
                      }
                      else if(this.Gopoint === 8){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('ジャイアントオーガ',200,50,20,[{action: this.EKaisin, per: 20},{action: this.EMagic_fire, per: 10}],[''],'oga.png',400,1000);
                      }
                      else if(this.Gopoint === 10){
                        //this.Doneivent = "Stage9_Bossmae"//TODO:ラスボス前実験
                        this.Yado();
                      }
                      else if(r >= 75){//1/4の確率で宝箱
                        this.Takarabakohakken('ミミック',100,this.DEf+10,0,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],'','ミミック.png',400,120);
                      }
                       else if(p <= 1){
                        this.BattleE('ゴブリン',60,30,20,[{action: this.E_Yakusou, per: 30},],["火弱"],'gobulin.png',120,30);
                        //this.BattleE('ゴブリン2',160,30,20,[{action: this.ESkill_Gitai, per: 100},{action: this.E_Yakusou, per: 0},],["火弱"],'gobulin.png',120,30);

                       }
                      else if(p <= 2){
                        this.BattleE('ゴブリンツインズ',60,20,20,[{action: this.EKaisin, per: 10},],['2回行動'],'twins.png',100,30);
                      }
                      else if(p <= 3){
                        this.BattleE('ウッドワーム',100,30,40,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],['火弱'],'wood.png',200,50);
                      }
                      else if(p <= 4){
                        this.BattleE('闇の司祭',100,40,20,[{action: this.E_Jumonhansya, per: 70},{action: this.EMagic_fire, per: 70},],['火弱'],'madou.png',250,120);
                      }
                      else if(p <= 10){
                        this.BattleE('リザード',100,40,40,[{action: this.Eskill_Firebress, per: 70},],['氷弱'],'rizado.png',300,50);
                      }
                    },
                    E_Yakusou: function(){
                      if(this.EHp > this.EMaxHp/2 ){//2/4以下の体力時のみ、発動。体力の40を回復する
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は薬草を使った！',40,100,0,0,0,0);
                      }
                    },
                    E_Jumonhansya: function(){
                      if(this.Eunique.includes('呪文反射')){
                        this.flag -= 1;
                      }
                      else{
                        this.Eunique.push('呪文反射');
                        this.E_Text([this.EName+'は不思議なバリアを貼った！',this.Name+'の呪文は効かなくなったようだ']);
                      }
                    },
                    E_Change: function(){
                      if(this.EHp >= this.Hp ){//プレイヤーの方が高い時は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        let h1 = this.Hp;
                        let h2 = this.EHp;
                        this.Hp = h2;
                        this.EHp = h1;//HP入れ替え
                        if(this.EMaxHp < this.EHp){
                          this.EHp = this.EMaxHp;//体力を上限に調整
                        }
                        this.E_Text([this.EName+'のライフチェンジ！','なんと、'+this.Name+'と'+this.EName+'のHPが入れ替わった！']);
                      }
                    },
                    E_Hadou: function(){
                      if(this.ATk <= this.BaseATk+this.WeponATk){//プレイヤーの元々の攻撃力が今の攻撃力より高い時は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.ATk = this.BaseATk+this.WeponATk;//攻撃力を元に戻す
                        this.DEf = this.BaseDEf+this.WeponDEf;//守備力を戻す
                        this.E_Text([this.EName+'は邪悪な波動を発した！','上昇していた'+this.Name+'の攻撃力と守備力が元に戻ってしまった！']);
                      }
                    },
                    Stage2: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.BackImage !== "stage2"){//背景をstageに即したものにする
                        this.BackImage = "stage2";
                      }
                      //const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const p = this.Gopoint + Math.floor(Math.random() * -3) + 1;//TODO:修正実験,前後の階層と当たる可能性
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 8 && this.Doneivent !== "Stage2_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage2_Bossmae";
                      }
                      else if(this.Gopoint === 9){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('ヒュドラ',600,130,50,[{action: this.jikosaisei, per: 80},{action: this.moudokuburesu, per: 60}],['火弱'],'hyudora.png',1300,2000);
                      }
                      else if(this.Gopoint === 11){
                        this.Yado();
                      }
                      else if(r >= 75){//1/4の確率で宝箱
                        this.Takarabakohakken('ミミック',100,100,100,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],'','ミミック.png',800,12);
                      }
                       else if(p <= 1){
                        this.BattleE('大蜘蛛',70,50,10,[{action: this.EPoisonattack, per: 40},],['火弱','氷弱'],'kumo.png',350,12);
                       }
                      else if(p <= 2){
                        this.BattleE('人食いきのこ',100,60,20,[{action: this.EPoisonattack, per: 80},{action: this.Eheal80, per: 0}],["火弱"],'kinoko.png',350,12);
                      }
                      else if(p <= 3){
                        this.BattleE('語り木',120,30,40,[{action: this.ESleep, per: 30},{action: this.EMagic_fire, per: 30}],['火弱'],'kutiki.png',450,12);
                      }
                      else if(p <= 4){
                        this.BattleE('イモリナイト',160,100,25,[{action: this.jikosaisei, per: 80},{action: this.EKaisin, per: 5}],["火弱"],'imori.png',600,12);
                      }
                      else if(p <= 5 && r > 20){//低確率で出現
                        this.BattleE('ホワイトスネーク',120,100,90,[{action: this.EPoisonattack, per: 80},{action: this.EKaisin, per: 5}],['火弱'],'sirohebi.png',600,12);
                      }
                      else if(p <= 6){
                        this.BattleE('プラントビースト',140,120,20,[{action: this.EPoisonattack, per: 70},{action: this.EKaisin, per: 5}],['火弱'],'plantdog.png',650,12);
                      }
                      else if(p <= 7){
                        this.BattleE('プラントドラゴ',300,40,60,[{action: this.jikosaisei, per: 60},{action: this.moudokuburesu, per: 10},{action: this.EKaisin, per: 5}],['火弱','氷弱','雷弱'],'plantbirst.png',800,12);
                      }
                      else if(p <= 8){
                        this.BattleE('イグアナゾンビ',400,150,0,[{action: this.EKaisin, per: 20},{action: this.moudokuburesu, per: 60}],['火弱'],'iguana.png',850,100);
                      }
                      else{//Noiventsになる
                        this.Noivents();
                        console.log("NOaction");
                      }
                    },
                    moudokuburesu: function(){
                      this.Eskill("は猛毒のブレスを吐き出した！",this.Level,100,5,100,0,0,0,0,'毒',90)
                    },
                    jikosaisei: function(){
                      if(this.EHp > this.EMaxHp/4 ){//1/4以下の体力時のみ、発動。体力の1/6を回復する
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は傷ついた体を自己再生した！',Math.ceil(this.EMaxHp/6),100,0,0,20,50)
                      }
                    },
                    Stage3: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.BackImage !== "stage3"){//背景をstageに即したものにする
                        this.BackImage = "stage3";
                      }
                      //const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const p = this.Gopoint + Math.floor(Math.random() * -3) + 1;//TODO:修正実験,前後の階層と当たる可能性
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 8 && this.Doneivent !== "Stage3_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage3_Bossmae";
                      }
                      else if(this.Gopoint === 9){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('フェニックス',500,130,10,[{action: this.EMagic_charge, per: 30},{action: this.EMagic_fullheal, per: 25}],['氷弱'],'fenikkusu.png',1300,2000);
                      }
                      else if(this.Gopoint === 11){
                        this.Yado();
                      }
                      else if(r >= 85){//15%の確率で宝箱
                        this.Takarabakohakken('ミミック',100,100,100,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],'','ミミック.png',800,12);
                      }
                       else if(p <= 1){
                        this.BattleE('オオオオカミ',70,70,0,[{action: this.EKaisin, per: 20},],['火弱','氷弱','雷弱'],'okami.png',300,12);
                       }
                       else if(p <= 2){
                        this.BattleE('スコーピオン',70,70,10,[{action: this.EPoisonattack, per: 40},],['火弱','氷弱'],'sasori.png',300,12);
                       }
                      else if(p <= 3){
                        this.BattleE('彷徨うミイラ',200,100,20,[{action: this.EKaisin, per: 10}],['火弱','氷弱'],'ミイラ.png',300,12);
                      }
                      else if(p <= 4){
                        this.BattleE('ハーピィ',170,100,20,[{action: this.EMagic_charge, per: 30},{action: this.ESkill_Huiuti, per: 10}],['氷弱','2回行動'],'hapy.png',600,12);
                      }
                      else if(p <= 5){
                        this.BattleE('牛頭鬼',160,150,25,[{action: this.ESkill_Kabutowari, per: 80},{action: this.EKaisin, per: 5}],["氷弱"],'gozuki.png',650,12);
                      }
                      else if(p <= 6 && r >= 50){//低確率で出現
                        this.BattleE('砂塵の死神',160,100,20,[{action: this.EKaisin, per: 30},],["火弱"],'sinigami.png',750,120);
                      }
                      else if(p <= 6 && r >= 25){
                        this.BattleE('死人の戦車',100,110,90,[{action: this.EMagic_charge, per: 50},{action: this.ESkill_Kabutowari, per: 80},{action: this.EKaisin, per: 5}],['火弱','氷弱','2回行動'],'sensya.png',750,120);
                      }
                      else if(p <= 8 ){
                        this.BattleE('スフィンクス',250,150,0,[{action: this.EMagic_charge, per: 50},{action: this.ESkill_Huiuti, per: 60}],['火弱'],'sufinkusu.png',750,500);
                      }
                      else{//Noiventsになる
                        this.Noivents();
                        console.log("NOaction");
                      }
                    },
                    ESkill_Huiuti: function(){
                      this.Eskill('の不意打ち攻撃！',Math.ceil(this.EATk/5),100,0,0,0,0,0,0,0,0)
                    },
                    EMagic_charge: function(){
                      if(this.EATk > this.DEf *1.5 || this.EATk === this.EBaseATk*5){//相手の守備力の1.5倍以上攻撃力がある場合は、行わない
                        this.flag -= 1;
                      }
                      else{//:TODO忘れないように注意！
                        this.EBaff('は呪文「チャージ」を唱えた！',0,0,Math.ceil(this.EATk/2),100,0,0)
                      }
                    },
                    EMagic_fullheal: function(){
                      if(this.EHp > this.EMaxHp/4 ){//1/4以下の体力時のみ、発動。体力を全回復する
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は呪文「フルヒール」を唱えた！',this.EMaxHp,100,0,0,0,0)
                      }
                    },
                    ESkill_Kabutowari: function(){
                      this.EAttack2('のかぶと割り！',0,100,0,0,0,0,Math.ceil(this.DEf/4),50,0,0)
                    },
                    Stage4: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.BackImage !== "stage4"){//背景をstageに即したものにする
                        this.BackImage = "stage4";
                      }
                      //const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const p = this.Gopoint + Math.floor(Math.random() * -3) + 1;//TODO:修正実験,前後の階層と当たる可能性
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 8 && this.Doneivent !== "Stage4_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage4_Bossmae";
                      }
                      else if(this.Gopoint === 9){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('ゲンブタートル',600,150,this.ATk,[{action: this.EMagic_growth, per: 10},{action: this.Eskill_Icebress, per: 25}],['火弱'],'genbu.png',1300,2000);
                      }
                      else if(this.Gopoint === 11){
                        this.Yado();
                      }
                      else if(r >= 85){//15%の確率で宝箱
                        this.Takarabakohakken('ミミック',100,100,100,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],'','ミミック.png',600,12);
                      }
                       else if(p <= 1){
                        this.BattleE('ビックバット',70,40,20,[{action: this.EKaisin, per: 10},],['火弱','氷弱','雷弱'],'koumori.png',400,12);
                       }
                       else if(p <= 2){
                        this.BattleE('グラトニー',70,40,50,[{action: this.ESleep, per: 30},{action: this.EMagic_growth, per: 30}],['火弱','氷弱'],'guratoni.png',450,12);
                       }
                      else if(p <= 3 && r >= 75){
                        this.BattleE('ツチノコ',40,50,100,[{action: this.moudokuburesu, per: 20}],['火弱','氷弱'],'tutinoko.png',1000,120);
                      }
                      else if(p <= 4){
                        this.BattleE('地底竜',120,100,60,[{action: this.Eskill_Icebress, per: 30},{action: this.EMagic_growth, per: 20}],['炎弱',],'hakuryu.png',600,12);
                      }
                      else if(p <= 5){
                        this.BattleE('盾の番人',100,100,80,[{action: this.EKaisin, per: 10},{action: this.EMagic_growth, per: 20}],["火弱"],'bannin.png',650,120);
                      }
                      else if(p <= 6){
                        this.BattleE('メタルナイト',150,120,130,[{action: this.E_Jumonhansya, per: 90},{action: this.ESkill_Kabutowari, per: 30},{action: this.EMagic_charge, per: 30}],["炎弱"],'metaru.png',750,100);
                      }
                      else if(p <= 8){
                        this.BattleE('黄金竜',150,110,150,[{action: this.E_Jumonhansya, per: 70},{action: this.EMagic_growth, per: 20},{action: this.Eskill_Firebress, per: 50},{action: this.EKaisin, per: 5}],[''],'kinryu.png',750,120);
                      }
                      else{//Noiventsになる
                        this.Noivents();
                        console.log("NOaction");
                      }
                    },
                    Eskill_Icebress: function(){
                      this.Eskill("は氷のブレスを吐き出した！",this.Level*2,100,5,100,0,0,0,0,0,0)
                    },
                    Eskill_Firebress: function(){
                      this.Eskill("は炎のブレスを吐き出した！",this.Level*3,100,0,0,0,0,0,0,0,0)
                    },
                    EMagic_growth: function(){
                      if(this.EATk > this.DEf*1.5 || this.EATk >= this.EBaseATk*5){//守備力の1.5倍の攻撃力を持っている場合は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は呪文「グロース」を唱えた！',0,0,Math.ceil(this.EATk/8),100,Math.ceil(this.EDEf/8),100)
                      }
                    },
                    Stage6: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.Gopoint < 7){//背景をstageに即したものにする
                        this.BackImage = "stage62";
                      }
                      else{
                        this.BackImage = "stage61";//背景中盤で変える
                      }
                      //const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const p = this.Gopoint + Math.floor(Math.random() * -3) + 1;//TODO:修正実験,前後の階層と当たる可能性
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 13 && this.Doneivent !== "Stage6_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage6_Bossmae";
                      }
                      else if(this.Gopoint === 14){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('マンティコア',1000,this.DEf+30,this.ATk,[{action: this.EMagic_charge, per: 30},{action: this.EMagic_build, per: 25}],['氷弱'],'manthikoa.png',2000,1000);
                      }
                      else if(this.Gopoint === 16){
                        this.Yado();
                      }
                      else if(r >= 85){//15%の確率で宝箱
                        this.Takarabakohakken('ミミック',100,100,150,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],'','ミミック.png',600,12);
                      }
                       else if(p <= 1){
                        this.BattleE('アングリーエイプ',200,130,90,[{action: this.EKaisin, per: 20},],['火弱','氷弱','雷弱'],'gorira.png',850,12);
                       }
                       else if(p <= 2){
                        this.BattleE('窮鼠の群れ',200,120,90,[{action: this.EMagic_build, per: 60},{action: this.ESkill_Huiuti, per: 30}],['火弱','氷弱','2回行動'],'rats.png',900,12);
                       }
                      else if(p <= 3 ){
                        this.BattleE('ゴートマン',140,150,150,[{action: this.EKaisin, per: 10}],['火弱','氷弱'],'yagi.png',850,120);
                      }
                      else if(p <= 4){
                        this.BattleE('ロックリザード',300,110,200,[{action: this.Eskill_Firebress, per: 50},{action: this.EKaisin, per: 20}],['炎弱',],'otokage.png',1000,12);
                      }
                      else if(p <= 5){
                        this.BattleE('アサシン',200,130,150,[{action: this.EKaisin, per: 20},{action: this.EMagic_build, per: 60}],["火弱"],'neko.png',1050,120);
                      }
                      else if(p <= 6){
                        this.BattleE('黒豹の騎士',250,120,150,[{action: this.E_Jumonhansya, per: 70},{action: this.ESkill_Ikari, per: 40},{action: this.EMagic_charge, per: 30}],["氷弱"],'kurohyou.png',1200,100);
                      }
                      else if(p <= 7){
                        this.BattleE('漆黒の獅子',500,200,40,[{action: this.EKaisin, per: 20},],[''],'kurosisi.png',1200,120);
                      }
                      else if(r <= 17){
                        this.BattleE('ブラックホーン',300,130,60,[{action: this.ESkill_Saiminjutu, per: 60},{action: this.EMagic_charge, per: 100}],['炎弱',],'kokuba.png',1300,12);
                      }
                      else if(r <= 34){
                        this.BattleE('グランドトータス',300,100,this.ATk,[{action: this.moudokuburesu, per: 30},{action: this.EKaisin, per: 10}],['雷弱',],'kame.png',1300,12);
                      }
                      else if(r <= 51){
                        this.BattleE('ケンタウロス',400,220,160,[{action: this.ESkill_Huiuti, per: 30},{action: this.EMagic_fullheal, per: 50}],['',],'kentaurosu.png',1300,12);
                      }
                      else if(r <= 68){
                        this.BattleE('キマイラ',350,200,40,[{action: this.EKaisin, per: 10}],['氷弱','雷弱','2回行動'],'kimaira.png',1400,100);
                      }
                      else if(r <= 84){
                        this.BattleE('グリフィン',400,220,60,[{action: this.Eskill_Firebress, per: 30},{action: this.EKaisin, per: 20}],['氷弱','雷弱'],'gurifin.png',1400,100);
                      }
                      else{//Noiventsになる
                        this.Noivents();
                        console.log("NOaction");
                      }
                    },
                    EMagic_build: function(){
                      if(this.EDEf > this.ATk || this.EDEf >= this.EBaseDEf*3){//守備力が攻撃力を上回っている場合は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は呪文「ビルド」を唱えた！',0,0,0,0,Math.ceil(this.EDEf/2),100)
                      }
                    },
                    ESkill_Ikari: function(){
                      if(this.EHp >= this.EMaxHp || this.Eunique.includes('怒り')){//ダメージ受けてない場合、一度使用した場合は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.Eunique.push('怒り');
                        this.EBaff('はダメージを受けて怒り狂っている！',0,0,this.EMaxHp - this.EHp,100,0,0)
                      }
                    },
                    ESkill_Saiminjutu: function(){
                      if(this.Joutaihennka !== "なし"){//不要な時に飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.Eskill('は催眠術を使った！',0,0,0,0,0,0,0,0,'眠り',80)
                      }
                    },
                    Stage7: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.Gopoint < 7){//背景をstageに即したものにする
                        this.BackImage = "stage71";
                      }
                      else{
                        this.BackImage = "stage73";//背景中盤で変える
                      }
                      //const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const p = this.Gopoint + Math.floor(Math.random() * -3) + 1;//TODO:修正実験,前後の階層と当たる可能性
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 16 && this.Doneivent !== "Stage7_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage7_Bossmae";
                      }
                      else if(this.Gopoint === 17){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('リヴァイアサン',1000,240,220,[{action: this.E_Jumonhansya, per: 80},{action: this.E_Hadou, per: 30},{action: this.EKaisin, per: 10}],[],'ribaiasan.png',2000,1000);
                      }
                      else if(this.Gopoint === 19){
                        this.Yado();
                      }
                      else if(r >= 85){//15%の確率で宝箱
                        this.Takarabakohakken('ミミック',100,100,150,[{action: this.EPoisonattack, per: 10},{action: this.ESleep, per: 80}],'','ミミック.png',600,12);
                      }
                       else if(p <= 1){
                        this.BattleE('オクトウィザード',90,90,150,[{action: this.EMajic_Splash, per: 40},],['雷弱'],'tako.png',850,12);
                       }
                       else if(p <= 2){
                        this.BattleE('フライワーム',200,120,90,[{action: this.EKaisin, per: 20},],['雷弱',],'fly.png',900,12);
                       }
                      else if(p <= 3 ){
                        this.BattleE('ステルスバード',90,120,150,[{action: this.EKaisin, per: 10},{action: this.ESkill_Huiuti, per: 40}],['雷弱'],'umidori.png',850,120);
                      }
                      else if(p <= 4){
                        this.BattleE('タコアンコウ',200,100,100,[{action: this.ESkill_Saiminjutu, per: 40},{action: this.EKaisin, per: 20}],['雷弱',],'takoanko.png',1000,12);
                      }
                      else if(p <= 5){
                        this.BattleE('剛魚',400,150,40,[{action: this.EKaisin, per: 10},],["火弱"],'sakana.png',1050,120);
                      }
                      else if(p <= 6){
                        this.BattleE('ミラージュフィッシュ',200,120,120,[{action: this.E_Jumonhansya, per: 70},{action: this.EMajic_Splash, per: 40},{action: this.EMagic_build, per: 30}],[""],'fish.png',1200,100);
                      }
                      else if(p <= 7){
                        this.BattleE('エレキシャーク',250,130,40,[{action: this.Eskill_Houden, per: 30},],[],'same.png',1200,120);
                      }
                      else if(p <= 8){
                        this.BattleE('オニウミウシ',400,160,40,[{action: this.EKaisin, per: 20},],['雷弱'],'umiusi.png',1200,120);
                      }
                      else if(r <= 14){
                        this.BattleE('白鯨',400,130,60,[{action: this.ESkill_Suijaku, per: 60},{action: this.ESkill_Kanakiri, per: 20}],['雷弱',],'hakugei.png',1300,12);
                      }
                      else if(r <= 28){
                        this.BattleE('クラーケン',300,150,100,[{action: this.EMajic_Spoil, per: 30},{action: this.EMajic_Splash, per: 30}],['雷弱','2回行動'],'ika.png',1300,120);
                      }
                      else if(r <= 42){
                        this.BattleE('カプリコーン',400,160,60,[{action: this.EKaisin, per: 20},{action: this.EMagic_fullheal, per: 50}],['',],'kapurikon.png',1300,12);
                      }
                      else if(r <= 56){
                        this.BattleE('シーホース',350,200,40,[{action: this.ESkill_Saiminjutu, per: 50},{action: this.EKaisin, per: 20}],['雷弱'],'sihosu.png',1400,100);
                      }
                      else if(r <= 70){
                        this.BattleE('マカラ',400,180,60,[{action: this.Eskill_Houden, per: 30}],[],'makara.png',1400,100);
                      }
                      else if(r <= 84){
                        this.BattleE('マーマン',400,220,60,[{action: this.EKaisin, per: 20}],['雷弱'],'maman.png',1400,100);
                      }
                      else{//Noiventsになる
                        this.Noivents();
                        console.log("NOaction");
                      }
                    },
                    EMajic_Splash: function(){
                      this.EMagic('はスプラッシュを唱えた！',Math.ceil(this.MaxHp/6),100,0,0,0,0,0,0)
                    },
                    Eskill_Houden: function(){
                      this.Eskill('の放電攻撃！',80,100,0,0,0,0,0,0,0,0)
                    },
                    EMajic_naightmea: function(){
                      if(this.Joutaihennka !== "なし"){//不要な時に飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.EMagic('は呪文「ナイトメア」を唱えた！',20,100,0,0,Math.ceil(this.DEf/4),80,'眠り',80)
                      }
                    },
                    ESkill_Suijaku: function(){
                      if(this.ATk <= this.BaseATk/4 && this.DEf <= this.BaseDEf/4 && this.Mp <= 0){//不要な時に飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.Eskill('は衰弱の霧を吐き出した！',0,0,Math.ceil(this.MaxMp/4),100,Math.ceil(this.ATk/4),100,Math.ceil(this.DEf/4),100,0,0)
                      }
                    },
                    ESkill_Kanakiri: function(){
                      if(this.Mp <= 0){//不要な時に飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.Eskill('は恐ろしい金切り声を上げた！',0,0,Math.ceil(this.MaxMp/2),100,0,0,0,0,0,0)
                      }
                    },
                    EMajic_Spoil: function(){
                      if(this.ATk <= this.BaseATk/4){//不要な時に飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.EMagic('は呪文「スポイル」を唱えた！',0,0,Math.ceil(this.ATk/4),100,0,0,0,0)
                      }
                    },
                    Stage9: function(){
                      this.BClist = "confirm";//フィールドでのコマンドにする
                      this.Confirmtype = '次の行動';//フィールドでのコマンドにする
                      if(this.Gopoint < 10){//背景をstageに即したものにする
                        this.BackImage = "stage93";
                      }
                      else{
                        this.BackImage = "stage92";//背景ボス戦で変える
                      }
                      //const p = Math.floor(Math.random() * this.Gopoint) + 1;//進度
                      const p = this.Gopoint + Math.floor(Math.random() * -3) + 1;//TODO:修正実験,前後の階層と当たる可能性
                      const r = Math.floor(Math.random() * 100) + 1;//同pでの確率
                      if(this.Gopoint === 10 && this.Doneivent !== "Stage9_Bossmae"){//まだボス前イベントしてない時
                        this.Bossmae();
                        this.Doneivent = "Stage9_Bossmae";
                      }
                      else if(this.Gopoint === 11){
                        this.Gopoint+=1;//ボスには一度しか当たらないようにする
                        this.BattleE('ケルベロス',1000,this.DEf+100,100,[{action: this.E_Jumonhansya, per: 60},{action: this.ESkill_Kabutowari, per: 30},{action: this.ESkill_minimam, per: 30},{action: this.ESkill_Kanakiri, per: 20}],[],'keruberosu.png',2000,1000);
                      }
                      else if(this.Gopoint === 13){
                        this.Yado();
                      }
                      else if(r >= 85){//15%の確率で宝箱
                        this.Takarabakohakken('ミミック',300,100,100,[{action: this.ESkill_Gitai, per: 100},{action: this.EKaisin, per: 20}],[],'ミミック.png',1000,12);
                      }
                      else if(r <= 14){
                        this.BattleE('ドラゴンソウル',400,180,180,[{action: this.ESkill_Suijaku, per: 50},{action: this.EMagic_fullheal, per: 40}],['雷弱',],'soul.png',1300,12);
                      }
                      else if(r <= 28){
                        this.BattleE('ソウルイーター',350,150,200,[{action: this.E_Change, per: 70},{action: this.ESkill_Huiuti, per: 30}],[],'eater.png',1300,120);
                      }
                      // else if(r <= 36){
                      //   this.BattleE('ドラゴンソウル',350,200,60,[{action: this.EMajic_Inferuno, per: 20},{action: this.ESkill_Suijaku, per: 20}],['',],'soul.png',1300,12);
                      // }
                      else if(r <= 42){
                        this.BattleE('デュラハン',450,220,180,[{action: this.ESkill_minimam, per: 30},{action: this.EMagic_makisim, per: 30}],['炎弱'],'dyurahan.png',1400,100);
                      }
                      else if(r <= 56){
                        this.BattleE('ゴーレム',500,180,this.ATk,[{action: this.E_Hadou, per: 40},{action: this.E_Jumonhansya, per: 40},{action: this.EKaisin, per: 20}],[],'goremu.png',1400,100);
                      }
                      else if(r <= 70){
                        this.BattleE('リッチ',400,220,180,[{action: this.EMajic_Burning, per: 20},{action: this.EMajic_Inferuno, per: 20},{action: this.E_Jumonhansya, per: 40},{action: this.EMagic_charge, per: 30}],['氷弱','雷弱'],'rich.png',1400,100);
                      }
                      else if(r <= 84){
                        this.BattleE('ドラゴン',500,250,200,[{action: this.EKaisin, per: 10},{action: this.Eskill_Firebress, per: 20},{action: this.EMajic_Inferuno, per: 40}],['氷弱'],'doragon.png',1400,100);
                      }
                      else{//Noiventsになる
                        this.Noivents();
                        console.log("NOaction");
                      }
                    },
                    ESkill_Gitai: function(){
                      if(this.Eunique.includes('擬態')){//一度使用した場合は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.Image = 'neba.png';
                        this.Eunique.push('擬態');
                        this.EBaff('は'+this.Name+'の姿に擬態した！',0,0,this.ATk - this.EATk,100,this.DEf - this.EDEf,100)
                      }
                    },
                    EMajic_Inferuno: function(){
                        this.EMagic('は呪文「インフェルノ」を唱えた！',this.Level*3,100,Math.ceil(this.ATk/4),100,0,0,0,0)
                    },
                    EMajic_Burning: function(){
                        this.EMagic('は呪文「バーニング」を唱えた！',150,100,0,0,0,0,0,0)
                    },
                    EMagic_makisim: function(){
                      if(this.EATk > this.DEf*1.5 || this.EATk >= this.EBaseATk*5){//守備力の1.5倍の攻撃力を持っている場合は飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.EBaff('は呪文「マキシム」を唱えた！',0,0,Math.ceil(this.EATk/4),100,Math.ceil(this.EDEf/4),100)
                      }
                    },
                    ESkill_minimam: function(){
                      if(this.ATk <= this.BaseATk/4 && this.DEf <= this.BaseDEf/4 ){//不要な時に飛ばす
                        this.flag -= 1;
                      }
                      else{
                        this.EMagic('は呪文「ミニマム」を唱えた！',0,0,Math.ceil(this.ATk/4),100,Math.ceil(this.DEf/4),100,0,0)
                      }
                    },
                    BattleE: function(ename,ehp,eatk,edef,actions,eunique,image,eexp,egold){
                      //プレイヤーステータスの読み込み_敵より先に読み込まなければ、コピーできない
                      this.ATk= this.BaseATk + this.WeponATk;
                      this.DEf= this.BaseDEf + this.WeponDEf;
                      //敵ステータスの読み込み
                      this.EName = ename;
                      this.EMaxHp = ehp;
                      this.EHp = ehp;
                      this.EATk = eatk;
                      this.EBaseATk = eatk;
                      this.EDEf = edef;
                      this.EBaseDEf = edef;
                      this.Image = image;
                      this.EEXp = eexp;
                      this.EGold = egold;
                      this.EActions = actions;
                      this.Eunique = eunique;
                      /////
                      this.ImageOn = true;//画像表示
                      this.text = this.EName+"が現れた！";
                      this.SwitchOn= false;
                      this.turnflug = 1;//最初に誤発動しないように、武器の効果発動リセット:TODO
                      this.Action= this.Playerturn;//なぜかうまくいく
                    },
                    Takarabakohakken: function(ename,ehp,eatk,edef,actions,eunique,image,eexp,egold){
                      this.Image = "宝箱.png";
                      this.ImageOn = true;//画像表示
                      this.text = "宝箱を見つけた！";
                      this.SwitchOn= false;
                      //敵ステータスの読み込み
                      this.EName = ename;
                      this.EMaxHp = ehp;
                      this.EHp = ehp;
                      this.EATk = eatk;
                      this.EDEf = edef;
                      this.EBaseATk = eatk;
                      this.EBaseDEf = edef;
                      this.MimicImage = image;
                      this.EEXp = eexp;
                      this.EGold = egold;
                      this.EActions = actions;
                      this.Eunique = eunique;
                      this.Action= this.Takarabakosenntaku;//なぜかうまくいく

                    },
                    Takarabakosenntaku: function(){
                      this.confirmmsg = "宝箱を開けますか？";
                      this.Confirmtype = "はいいいえ";
                      this.SwitchOn= true;
                      this.BClist='confirm';
                      this.NoAction = this.Takarabakoakenai;
                      const p = Math.floor(Math.random() * 100) + 1;//1-100
                      if(p > 80){
                       this.YesAction = this.TakarabakoItem;//暫定的な対応
                      }
                      else if(p > 60　&& this.AllWeponShield.length >= 1){
                       this.YesAction = this.TakarabakoWeponShield;//暫定的な対応
                      }
                      else if(p > 40 && this.Allmagic.length >= 1){
                       this.YesAction = this.TakarabakoMagic;//暫定的な対応
                      }
                      else{
                       this.YesAction = this.TakarabakoBattleE;
                      }
                    },
                    Bossmae: function(){
                      command = ['前方にただならぬ気配を感じる','万全の準備をして望んだ方が良さそうだ'];
                      this.SwitchOn= false;
                      this.Action= this.Bossmae;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//選択画面に戻る
                        this.BClist='confirm';
                        this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                        this.ImageOn = false;//画像非表示
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Noivents: function(){
                      command = ['周囲には何もなさそうだ',];
                      this.SwitchOn= false;
                      this.Action= this.Noivents;
                      this.Noivent = 1;//周囲を調べても何も出ないようにする
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//選択画面に戻る
                        this.BClist='confirm';
                        this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                        this.ImageOn = false;//画像非表示
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Takarabakoakenai: function(){
                      command = [this.Name+"は宝箱を放っておいた",];
                      this.SwitchOn= false;
                      this.Action= this.Takarabakoakenai;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//選択画面に戻る
                        this.BClist='confirm';
                        this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                        this.ImageOn = false;//画像非表示
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    TakarabakoBattleE: function(){
                      //プレイヤーステータスの読み込み
                      this.ATk= this.BaseATk + this.WeponATk;
                      this.DEf= this.BaseDEf + this.WeponDEf;
                      /////
                      this.ImageOn = true;//画像表示
                      this.Image = this.MimicImage;//宝箱からミミックの画像へ
                      this.SwitchOn= false;
                      this.Action = this.TakarabakoBattleE;
                      this.turnflug = 1;//最初に誤発動しないように、武器の効果発動リセット:TODO
                      //勝利後に選択肢に戻れるよう調整
                      this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                      //
                      command = ["なんと、宝箱はモンスターだった！",this.EName+"が現れた！",];
                      if(a === command.length){
                        a= -1;
                        this.Resetfun();
                        //this.Action= this.Playerturn;//なぜかうまくいく
                        this.Playerturn();//ターンを渡す
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    TakarabakoWeponShield: function(){//宝箱を開けて武具をゲットした時のアクション
                      command = [this.Name+"は宝箱を開けた",this.Name+"は"+this.Getting+"を手に入れた！",];
                      this.SwitchOn= false;
                      this.Action= this.TakarabakoWeponShield;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//選択画面に戻る
                        this.BClist='confirm';
                        this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                        this.ImageOn = false;//画像非表示
                      }
                      if(a === 0 ){
                        const p = Math.floor(Math.random() * this.AllWeponShield.length);
                        this.Getting = this.AllWeponShield[p];
                        this.UseWeponShield.push(this.AllWeponShield[p]);
                        this.AllWeponShield.splice( p, 1 );
                        console.log(this.AllWeponShield);

                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    TakarabakoMagic: function(){//宝箱を開けて魔法を覚えた時のアクション
                      command = [this.Name+"は宝箱を開けた","宝箱には魔導書が入っていた！",this.Name+"は呪文「"+this.Getting+"」を覚えた！",];
                      this.SwitchOn= false;
                      this.Action= this.TakarabakoMagic;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//選択画面に戻る
                        this.BClist='confirm';
                        this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                        this.ImageOn = false;//画像非表示
                      }
                      if(a === 0 ){
                        const p = Math.floor(Math.random() * this.Allmagic.length);
                        this.Getting = this.Allmagic[p];
                        this.Usemagic.push(this.Allmagic[p]);
                        this.Allmagic.splice( p, 1 );
                        console.log(this.Allmagic);

                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    TakarabakoItem: function(){//宝箱を開けてアイテムをゲットした時のアクション
                      command = [this.Name+"は宝箱を開けた",this.Name+"は"+this.Getting+"を"+this.Getamount+"個手に入れた！",];
                      this.SwitchOn= false;
                      this.Action= this.TakarabakoItem;
                      if(a === command.length){
                        a= -1;
                        this.SwitchOn= true;//選択画面に戻る
                        this.BClist='confirm';
                        this.confirmmsg　="行動を選んでください";
                        this.Confirmtype = "次の行動";
                        this.ImageOn = false;//画像非表示
                      }
                      if(a === 0 ){
                        //ダメージ計算
                        let Item_stock = '';
                        const p = Math.floor(Math.random() * this.AllItem.length);
                        this.Getting = this.AllItem[p];
                        this.Getamount = Math.floor(Math.random() * 8) + 3;//入手量は3-10個
                        if(this.Getting === '薬草'){//リファクタしたい箇所
                          this.Yakusou_stock += this.Getamount;
                        }
                        else if(this.Getting === '毒消し'){
                          this.Dokukesi_stock += this.Getamount;
                        }
                        else if(this.Getting === '聖水'){
                          this.Seisui_stock += this.Getamount;
                        }
                        else if(this.Getting === '万能薬'){
                          this.Bannouyaku_stock += this.Getamount;
                        }
                        else if(this.Getting === 'コーヒー'){
                          this.Coffee_stock += this.Getamount;
                        }
                        else if(this.Getting === '奇跡の水'){
                          this.Getamount = Math.ceil(Math.random() * 5);//入手量を1-5に制限
                          this.Kisekinomizu_stock += this.Getamount;
                        }
                        else if(this.Getting === '精霊の杯'){
                          this.Getamount = Math.ceil(Math.random() * 5);//入手量を1-5に制限
                          this.Seireinosakazuki_stock += this.Getamount;
                        }
                        else if(this.Getting === '力の果実'){
                          this.Getamount = Math.ceil(Math.random() * 5);//入手量を1-5に制限
                          this.Tikaranokajitu_stock += this.Getamount;
                        }
                        else if(this.Getting === '守りの果実'){
                          this.Getamount = Math.ceil(Math.random() * 5);//入手量を1-5に制限
                          this.Mamorinokajitu_stock += this.Getamount;
                        }
                        else if(this.Getting === '命の果実'){
                          this.Getamount = Math.ceil(Math.random() * 5);//入手量を1-5に制限
                          this.Inotinokajitu_stock += this.Getamount;
                        }
                        else if(this.Getting === '魔力の果実'){
                          this.Getamount = Math.ceil(Math.random() * 5);//入手量を1-5に制限
                          this.Maryokunokajitu_stock += this.Getamount;
                        }
                      }
                      this.text=command[a];
                      console.log(a+"2");
                      this.msg2=a;
                      a+=1;
                    },
                    Opening: function(){
                      if(a === 0){
                        command = ["よくぞ参られた、勇者の血を引き継ぐ者よ","大魔王の復活により、世界は今滅亡の危機に瀕している","この世界の命運は貴殿に託された","どうか大魔王を倒し、この世界を救ってほしい","貴殿の中に眠りし勇者の力も、旅の中で目覚めていくであろう",this.Name+"は魔王討伐の旅に出た！"];
                        this.Action = this.Opening;
                        this.Gopoint = 0;//次のステージのためにリセットしておく
                          this.BackImage = "stage0";//背景を変える
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        //戦闘ではない場合
                          // this.BClist = "confirm";
                          this.SwitchOn = true;
                          // this.Confirmtype = '買い物';
                          console.log("ousama");
                      }
                      if(a === 1){
                        this.Image = "osama.png";
                        this.ImageOn = true;//画像表示

                      }
                      if(a === 5){
                        this.Image = "osama.png";
                        this.ImageOn = false;//画像表示
                        this.BackImage ="stage1";

                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Yado: function(){
                      if(a === 0){
                        command = [this.Name+"は小さな集落を見つけた！","旅の方よ、ここで休んでいきなさい",this.Name+"はHPとMPを全回復した！","何か買い物されますか？"];
                        this.Action = this.Yado;
                        this.Gopoint = 0;//次のステージのためにリセットしておく
                        this.Hp = this.MaxHp
                        this.Mp = this.MaxMp//全回復
                        this.Joutaihennka = 'なし';
                        if(this.Doneivent === "Stage9_Bossmae"){
                          this.Tx_saki = '先に進む';//ラスボス前
                          command = ["あなたなら必ずここまで来れると信じていました","旅の方、いえ、伝説の勇者よ、ここで休んでいきなさい",this.Name+"はHPとMPを全回復した！","魔王はこの先にいます、何か買い物されますか？"];
                        }
                        else{
                          this.BackImage = "syuraku";//最終ボス戦前でないなら、背景を変える
                        }
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        //戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          this.Confirmtype = '買い物';
                          console.log("yado");
                      }
                      if(a === 1){
                        this.Image = "娘.png";
                        this.ImageOn = true;//画像表示

                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Nextstage: function(){
                      if(a === 0){
                        command = ["旅の方よ、どうかご無事であらんことを",this.Name+"は集落を立ち去った",'',];
                        //this.BackImage = "syuraku";
                        this.Action = this.Nextstage;
                        if(this.Doneivent === "Stage9_Bossmae"){
                          command = ["私にできることはここまでです、ご武運をお祈りします",this.Name+"は扉の先へと進んだ","前方に凄まじいオーラを感じる"];
                        }
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        //戦闘ではない場合
                          this.BClist = "confirm";
                          this.SwitchOn = true;
                          this.Confirmtype = '次の行動';
                          console.log("yado");
                      }
                      if(a === 1){
                        this.Image = "娘.png";
                        this.ImageOn = false;//画像非表示
                      }
                      if(a === 2){
                        if(this.Doneivent === "Stage9_Bossmae"){//ステージ9をクリアしたばかりである場合
                            this.Stage = 10;
                            this.BackImage = "final4";
                          }
                        if(this.Stage === 6 || this.Stage === 7){//ステージ6,7をクリアしたばかりである場合
                            this.Stage = 9;
                            this.BackImage = "stage93";
                            command[2]=this.Name+"は魔界に足を踏み入れた";

                        }
                        if(this.Stage < 6 && this.Stage >1){//ステージ2-5をクリアしたばかりである場合
                          const p = Math.floor(Math.random() * 2) +1;//1-2の数字
                          if(p === 1){
                            this.Stage = 6;
                            this.BackImage = "stage62";
                            command[2]=this.Name+"は深い森に足を踏み入れた";
                          }
                          else if(p === 2){
                            this.Stage = 7;
                            this.BackImage = "stage71";
                            command[2]=this.Name+"は広い海へ乗り出した";
                          }
                        }
                        if(this.Stage === 1){//ステージ1をクリアしたばかりである場合
                          const p = Math.floor(Math.random() * 3) +1;//1-3の数字
                          if(p === 1){
                            this.Stage = 2;
                            this.BackImage = "stage2";
                            command[2]=this.Name+"は沼地に足を踏み入れた";
                          }
                          else if(p === 2){
                            this.Stage = 3;
                            this.BackImage = "stage3";
                            command[2]=this.Name+"は荒野に足を踏み入れた";
                          }
                          else if(p === 3){
                            this.Stage = 4;
                            this.BackImage = "stage4";
                            command[2]=this.Name+"は洞窟に足を踏み入れた";
                          }
                          else if(p === 4){
                            this.Stage = 5;
                            this.BackImage = "stage5";
                            command[2]=this.Name+"は古城に足を踏み入れた";
                          }
                        }
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    Lastboss: function(){
                      let done = 0;
                      if(a === 0){
                        command = ["よくぞここまでたどり着いたな、褒めて遣わす","貴様は余が直接葬り去ってやろう",];
                        //this.BackImage = "syuraku";
                        this.Action = this.Lastboss;
                        this.Doneivent = 'ラスボス戦';
                        this.stagename = 'STGE：FAINAL';
                        this.stagelength =1;
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        done = 1;
                        //魔王との戦い
                        //this.BattleE('魔王',1000,270,270,[{action: this.EMajic_Burning, per: 30},{action: this.ESkill_Suijaku, per: 10},],[],'maou.png',3000,1000);
                      }
                      if(a === 1){
                        this.Image = "娘.png";
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                      if(done === 1){//テキストを全て読み込んだのちに戦闘開始TODO:
                        this.BattleE('魔王',1000,270,270,[{action: this.EMajic_Burning, per: 30},{action: this.ESkill_Suijaku, per: 10},],[],'maou.png',3000,1000);
                      }
                    },
                    Lastboss2: function(){
                      let done = 0;
                      if(a === 0){
                        command = ["おのれ、この程度で勝ったと思うなよ","おのれ、この程度で勝ったと思うなよ","余の真の力を見せてやろう",];//TODO:実験
                        //this.BackImage = "syuraku";
                        this.Action = this.Lastboss2;
                        this.Doneivent = 'ラスボス戦2';
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length){
                        a= -1;
                        done = 1;
                        //魔王との戦い
                        //this.BattleE('魔王',1000,270,270,[{action: this.EMajic_Burning, per: 30},{action: this.ESkill_Suijaku, per: 10},],[],'maou.png',3000,1000);
                      }
                      if(a === 1){
                        this.Image = "娘.png";
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                      if(done === 1){//テキストを全て読み込んだのちに戦闘開始TODO:
                        this.BattleE('大魔王ルシファー',2000,this.DEf+70,this.ATk - 10,[{action: this.E_Jumonhansya, per: 100},{action: this.E_Hadou, per: 25},{action: this.ESkill_Kanakiri, per: 20},{action: this.EMajic_Burning, per: 20},{action: this.EKaisin, per: 10},],[],'maou2.png',3000,1000);
                      }
                    },
                    Ending: function(){
                      // let done = 0;
                      if(a === 0){
                        command = ["ふふ、貴様の力、見事であったぞ","余の野望もついに破れたり","だが絶望はまた訪れるのだ","数百年の時を経て余が復活した時、貴様のような勇者は果たして現れるかな？","ではさらばだ、、ぐはっ","・・・","大丈夫、きっと数百年後もあなたの意志は受け継がれていますよ","-END-"];
                        //this.BackImage = "syuraku";
                        this.Action = this.Ending;
                        this.Doneivent = 'ラスボス撃破';
                        this.Image = 'maou.png';
                        this.ImageOn = true;
                      }
                      BClist = 0;
                      this.SwitchOn= false;
                      if(a === command.length -1){
                        this.Action ='';//TODO:何かクリア後のアクションを入れる
                        //
                        //done = 1;
                        //魔王との戦い
                        //this.BattleE('魔王',1000,270,270,[{action: this.EMajic_Burning, per: 30},{action: this.ESkill_Suijaku, per: 10},],[],'maou.png',3000,1000);
                      }
                      if(a === 4){
                        this.ImageOn = false;//画像非表示
                      }
                      if(a === 6){
                        this.BackImage = 'ending';
                        this.Image = '娘.png';
                        this.ImageOn = true;
                      }
                      this.text=command[a];
                      this.msg2=a;
                      a+=1;
                    },
                    BattleEnd: function(){
                      let done = 0;//魔王戦に使用
                      this.Action= this.BattleEnd;
                      if(this.Hp<=0){
                        //this.text=this.Name+"は息絶えた";
                        command=[this.Name+"は息絶えた",this.Name+"は息絶えた"];
                        this.text=command[a];
                        console.log(a+"3");
                        this.msg2=a;
                        //a+=1;
                        a=0;
                          this.Gameover = 1;//GameOverの画面表示
                      }
                      else if(this.EHp<=0){
                        if(this.pushflag === false  && a=== -1){//一番最初に読み込んだ時のみの処理にする
                          command=[this.EName+"を倒した！",this.EGold+"Gを手に入れた！",this.EEXp+"経験値を獲得！",];
                          this.EXp+= this.EEXp;
                          console.log(this.Levelup);
                          while(this.EXp >= this.Levelup){//:FIXME レベルアップする際の式
                            this.EXp -= this.Levelup;
                            this.Level += 1;
                            console.log("levelup!");
                            this.Levelup = this.Level*100;//更新
                            this.MaxHp += 5;
                            this.MaxMp += 5;
                            this.BaseATk += 5;
                            this.BaseDEf += 5;
                            //command.push(2);
                            command.push(`${this.Name}はレベルが${this.Level}に上がった！`);
                            command.push(`HPが5上がった！
MPが5上がった！
攻撃力が5上がった！
守備力が5上がった！`);
                            if(this.Level%3 === 0 && this.Allskill.length>0 && Math.random() > 0.5){//1/2の確率
                              const p = Math.floor(Math.random() * this.Allskill.length)
                              this.Useskill.push(this.Allskill[p]);
                              command.push(`${this.Name}は特技「${this.Allskill[p]}」を覚えた！`);
                              this.Allskill.splice( p, 1 );
                              console.log(this.Allskill);
                            }
                            else if(this.Level%3 === 0 && this.Allmagic.length > 0 ){//1/2の確率で魔法覚える
                              const p = Math.floor(Math.random() * this.Allmagic.length)
                              this.Usemagic.push(this.Allmagic[p]);
                              command.push(`${this.Name}は呪文「${this.Allmagic[p]}」を覚えた！`);
                              this.Allmagic.splice( p, 1 );
                              console.log(this.Allmagic);
                            }
                            else if(this.Level%3 === 0 && this.Allskill.length > 0 ){//魔法覚え尽くしている時は特技
                              const p = Math.floor(Math.random() * this.Allskill.length)
                              this.Useskill.push(this.Allskill[p]);
                              command.push(`${this.Name}は特技「${this.Allskill[p]}」を覚えた！`);
                              this.Allskill.splice( p, 1 );
                              console.log(this.Allskill);
                            }
                            this.text=command[a];
                            //a=2;
                            console.log(command);
                            this.pushflag = true;
                          }
                        }
                        if(a === command.length){
                          a= -1;
                          this.Gold+= this.EGold;//行動選択画面に戻る
                          this.SwitchOn= true;
                          this.BClist='confirm';
                          console.log("out");
                          this.pushflag = false;//レベルアップ時にオンにしたが、オフにする
                          done = 1;//魔王戦に使う
                        }

                        //}
                        this.ImageOn = false;//画像非表示
                        this.text=command[a];
                        this.msg2=a;
                        a+=1;
                        if(this.Doneivent === 'ラスボス戦' && this.Hp > 0 && done === 1){//第一形態に勝った場合
                          this.Lastboss2();
                        }
                        if(this.Doneivent === 'ラスボス戦2' && this.Hp > 0 && done === 1){//第一形態に勝った場合
                          this.Ending();
                        }
                      }
                    },
                    reset: function () {
                      location.reload();
                    },
                    setumei: function () {
                      window.open('https://welcome19981998.github.io/explain/','_blank');
                    },
                  }//methodの終わり
                });
              </script>
    </body>
</html>
